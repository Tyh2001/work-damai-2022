(window.webpackJsonp=window.webpackJsonp||[]).push([[86],{2662:function(t,i,s){var e;void 0===(e=function(){"use strict";epub360.PlayerPlugins.push({config:{type:"Linkage",template:"others"},render:function(){var t=this.getdetail(),i=t.end-t.start||0;if((0!=t.range||0!=i)&&t.iBindings&&t.iBindings.length){if(this.iBindings=t.iBindings,this.range=t.range||Math.abs(t.end-t.start),this.start=t.delay||0,this.end=this.start+this.range,this.control_start=0,this.stretch=t.stretch||0,this.control_end=this.end+(t.stretch||0),this._current=t.init_position||0,this.current=this._current,this._delta=0,this.axis=t.axis,this.oneway=t.oneway,this.orientation=t.axis<=1,this.init_progress=null,this.inertia=t.inertia,this.tmp_current=this._current,this.current>=this.start&&this.current<=this.end&&(this.init_progress=(this.current-this.start)/this.range),1===this.axis||3===this.axis)var s="disableDragY iMouseWheel disableMouseWheelY dragConnector";else s="disableDragX iMouseWheel disableMouseWheelX dragConnector";this.$el.closest(".Presentation").addClass(s),this.$el.closest(".Presentation").data("dragfuncs")||this.$el.closest(".Presentation").data("dragfuncs",[]),this.$el.closest(".Presentation").data("dragfuncs").push({func:this.control,start:this.start,end:this.end,axis:this.axis}),this._init_progress=this.init_progress}},renderBindings:function(){if(this.iBindings&&this.iBindings.length){this.timelines=[];for(var t=0;t<this.iBindings.length;t++){var i=[],s=this.iBindings[t];if("maintimeline"==s.id)var e=this.model.page.iAnimationlist.timeline;else{i=[s];e=window.animateTimeline.generateTimeline({onStart:null,ids:i,iPage_id:s.page_id,page:this.model.page,paused:!0,foraction:!0})}e&&this.timelines.push({timeline:e,type:0,id:s.id,page_id:s.page_id})}null!=this.init_progress&&this.progress(this.init_progress,!0)}},control:function(t,i,s){if(this.range&&this.timelines&&this.timelines.length){if(s){if(!this.inertia)return;this.orientation||(i=-i);var e=this.current-i;if(this.oneway&&this.tmp_current&&e<this.tmp_current)return;if(e<this.control_start?e=this.control_start:e>this.control_end&&(e=this.control_end),e==this.current)return;if(this.current=e,this.tmp_current=e,e>=this.start&&e<=this.end){var n=Math.abs(e-this.start)/this.range;this.progress(n)}return null}if("dragend"==t.type){e=this.current-this._delta;if(this._delta=0,e<this.control_start?e=this.control_start:e>this.control_end&&(e=this.control_end),e==this.current)return;if(this.current=e,this.oneway){if(this.current<this.tmp_current)return void(this.current=this.tmp_current);this.tmp_current=this.current}if(e>=this.start&&e<=this.end){n=Math.abs(e-this.start)/this.range;this.progress(n)}return null}this.orientation||(i=-i);var r=this.orientation?1:-1;if(!(this._delta=i,(e=this.current-i)===this.current||this.oneway&&this.tmp_current&&e<this.tmp_current)){if(e>=this.control_start&&e<=this.control_end){if(this.tmp_current=e,e>=this.start&&e<=this.end){var n=Math.abs(e-this.start)/this.range;this.progress(n)}return 0}return e<this.control_start?(e-this.control_start)*r:e>this.control_end?(e-this.control_end)*r:void 0}}},progress:function(t,i){this.inverse&&(t=1-t);for(var s=0;s<this.timelines.length;s++){var e=this.timelines[s].timeline;if(i||e.pause(),e.totalProgress(t),t>0&&t<1&&e.elements.length)for(var n=0;n<e.elements.length;n++)$(e.elements[n]).removeClass("hide")}},resetOtherStatus:function(){},immediateRender:function(){},onInitialize:function(){},onEpubReady:function(){},onStop:function(){if(this.timelines&&this.timelines.length){for(var t=0;t<this.timelines.length;t++){var i=this.timelines[t].timeline;i.pause(0),i.kill()}this.timelines=[]}this.current=this._current,this._delta=0,this.tmp_current=this._current,this.init_progress=this._init_progress},onPlay:function(){this.renderBindings()}})}.apply(i,[]))||(t.exports=e)}}]);