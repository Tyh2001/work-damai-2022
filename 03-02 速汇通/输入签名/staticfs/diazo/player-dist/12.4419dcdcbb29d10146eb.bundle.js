(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{1043:function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(78),__webpack_require__(14),__webpack_require__(154),__webpack_require__(63),__webpack_require__(11),__webpack_require__(8),__webpack_require__(10),__webpack_require__(100)],__WEBPACK_AMD_DEFINE_RESULT__=function(_find,_map,_filter,_indexOf,_typeof2,_es6ObjectToString,_es6RegexpToString,_es6DateToJson){"use strict";var _interopRequireDefault=__webpack_require__(0);_find=_interopRequireDefault(_find),_map=_interopRequireDefault(_map),_filter=_interopRequireDefault(_filter),_indexOf=_interopRequireDefault(_indexOf),_typeof2=_interopRequireDefault(_typeof2),function(){var _=__webpack_require__(775),_g_mvc={saveHandle:function(e,t){200==e.code?t("success","成功"):t("error",e.msg)},mvcSaveHandle:{wait:!0,success:function(e,t){200==t.code?interaction.message("success","设定保存成功"):interaction.message("error",t.msg)},error:function(e){interaction.message("error","服务端错误")}},_loadTemplate:function(e,t){},_CollectionforSaveAll:function(){return new(Backbone.Model.extend({initialize:function(){this.set("id","GlobalSave")},sync:function(e,t,n){var i=this.data;this.attributes=i,"create"!=e&&("update"==e&&(n.url=this.url),"delete"!=e&&"read"!=e&&(Backbone.emulateHTTP=!0,Backbone.emulateJSON=!0,Backbone.sync(e,t,n)))}}))},createModel:function createModel(opts){var defaults={defaults:{},autoIndex:!0,autoUpdate:!0,autoRemove:!0,enableSync:!0,createUrl:null,updateUrl:null,removeUrl:null,fetchUrl:null,staticFetchUrl:null,staticRemoveUrl:null,staticCreateUrl:null,staticUpdateUrl:null,fetchUrlName:null,removeUrlName:null,createUrlName:null,updateUrlName:null,restful:!1,debug:!1,bindChange:null,bindRemove:null,callback:null,initView:null,patchKeys:null,initialize:function initialize(){if(this.iViewlist=[],this.iCollectionlist=[],this.get("id"))this.preset();else if(this.set("isNew",!0),this.autoIndex){var prefix=this.get("type")||this.get("iType")||"M";this.set("id",prefix+"_"+_g.uuid(4)),this.preset()}else this.save({},{wait:!0,success:function success(model,response){var returned=eval(response);"Success"!=returned.Status&&200!=returned.code||model.set("id",returned.ID.toString()),model.preset()}})},patchSave:function patchSave(callback,opts){if(opts||(opts={}),this.patchKeys&&this.patchKeys.length){var values=_.pick(this.toJSON(),this.patchKeys);this.save(values,{wait:!0,silent:opts.silent,patch:!0,success:function success(model,response){if(callback){var returned=eval(response);callback(returned)}},error:function(e,t){_g.error.serverError("save_"+e.name),opts.onError&&opts.onError()}})}else this.save()},sync:function(e,t,n){var i;if(!this.enableSync)return!1;if("create"==e){if(!(i=this.createUrl))return;n.url=i}if("update"==e||"patch"==e){if(!(i=this.updateUrl))return;n.url=i}if("delete"==e){if(!(i=this.removeUrl))return;n.url=i}if("read"==e){if(!(i=this.fetchUrl))return;n.url=i}n.url="string"==typeof n.url?n.url:n.url(t.attributes),this.restful||(Backbone.emulateHTTP=!0,Backbone.emulateJSON=!0),Backbone.sync(e,t,n)},addView:function(e,t){if("function"==typeof t&&(this[e]=new t({model:this})),"object"==(0,_typeof2.default)(t)){var n=_g.mvc.createView(t);this[e]=new n({model:this})}this[e]&&this.iViewlist.push(this[e])},addCollection:function(e,t){if("function"==typeof t&&(this[e]=new t),"object"==("undefined"==typeof view?"undefined":(0,_typeof2.default)(view))){var n=_g.mvc.createCollection(t);this[e]=new n}this[e]&&this.iCollectionlist.push(this[e])},preset:function(){this.callback&&this.callback(this);var e=this;this.autoUpdate&&this.on("change",(function(){e.updateAllViews()})),this.autoRemove&&this.on("destroy",(function(e,t,n){e.removeAllViews(),e.bindRemove&&e.bindRemove(e,n)})),this.bindChange&&this.bindChange(),this.initView&&this.addView("iview",this.initView)},updateAllViews:function(){_.each(this.iViewlist,(function(e){e.$el&&e.update()}))},removeView:function(e){if(this[e]){var t=this[e];this[e].remove(),this.iViewlist=_.reject(this.iViewlist,(function(e){return e==t})),this[e]=null}},removeAllViews:function(e){_.each(this.iViewlist,(function(t){t.$el&&(e?t.undelegateEvents():t.remove())}))}};opts=opts?$.extend(!0,{},defaults,opts):defaults;var Model=Backbone.Model.extend(opts);return Model},createView:function(e){var t={template:null,className:null,containment:null,wrap:null,wrapClassName:null,autoRender:!0,position:1,parseData:null,callback:null,bindChange:null,parseTemplate:null,templateKey:null,templateName:null,afterRender:null,initialize:function(){_.bindAll(this),this.autoRender&&this.render(),this.callback&&this.callback(this)},createEl:function(){var e,t=this.model.toJSON();return this.parseData&&(t=this.parseData()),e=this.parseTemplate?this.parseTemplate(this.template):this.template,_g.renderT(e,t,this.templateKey,this.templateName)},render:function(e,t){if(!this.model||!this.template)return!1;if(!_g.util.domExist(this.$el)){if(!e&&!this.containment)return!1;e||(e=$(this.containment)),t||(t=this.position),this.wrap&&!$(this.containment).is(this.wrap)&&(0==$(this.containment).children(this.wrap).length&&$(this.containment).append(document.createElement(this.wrap)),e=$(this.containment).children(this.wrap),this.containment&&this.wrapClassName&&e.addClass(this.wrapClassName));var n=this.createEl();return this.setElement(n),this.model.get("is_flow")&&$((0,_find.default)(n).call(n,".interaction-area-zoom")).append('<i style="position:absolute;right:0;bottom:0;z-index:9999" class="fa fa-building" aria-hidden="true"></i>'),1==t?e.append(n):e.prepend(n),this.className&&this.$el.addClass(this.className),this.afterRender&&this.afterRender(this),this}n=this.createEl();this.undelegateEvents(),this.$el.replaceWith(n),this.setElement(n),this.afterUpdate&&this.afterUpdate(this)},update:function(){this.render()},afterUpdate:function(){this.afterRender&&this.afterRender(this)},events:{}};return e=e?$.extend(!0,{},t,e):t,Backbone.View.extend(e)},createCollection:function(e){var t={enableSync:!1,fetchUrl:null,staticFetchUrl:null,saveUrl:null,staticSaveUrl:null,debug:!1,bindRemove:!1,bindReset:!0,bindAdd:null,callback:null,patchKeys:null,name:null,initialize:function(){var e=this;this.bindRemove&&this.on("remove",(function(t){"function"==typeof e.bindRemove?e.bindRemove(t):t.removeAllViews()})),this.bindReset&&this.on("reset",(function(t,n){"function"==typeof e.bindReset?e.bindReset(t,n):_.each(n.previousModels,(function(e){e.removeAllViews()})),e.afterReset&&e.afterReset(t,n)})),this.bindAdd&&this.on("add",(function(t){e.bindAdd()})),this.callback&&this.callback(this)},sortByIds:function(e){var t=this;this.reset((0,_map.default)(_).call(_,e,(function(e){return t.get(e)})),{silent:!0})},sync:function(e,t,n){if(!this.enableSync)return!1;if("read"==e){var i=this.fetchUrl?this.fetchUrl:this.staticFetchUrl;if(!i)return;n.url=i}if(!n.url)return!1;n.url="string"==typeof n.url?n.url:n.url(t.toJSON()),this.resetful||(Backbone.emulateHTTP=!0,Backbone.emulateJSON=!0),Backbone.sync(e,t,n)},getAll:function(e){var t=this;this.fetch({success:function(t,n){e&&e(n)},error:function(){_g.error.serverError("get_"+t.name)}})},saveAll:function(e){var t=this,n=this.saveUrl?this.saveUrl:this.staticSaveUrl;if(!n)return!1;var i=_g.mvc._CollectionforSaveAll();this.patchKeys&&this.patchKeys.length?i.data=(0,_map.default)(_).call(_,this.toJSON(),(function(e){var n=$.extend(!0,{},e);return n=_.pick(n,t.patchKeys)})):i.data=this.toJSON(),i.url=n,i.save({},{wait:!0,success:function(t,n){e&&e(n)},error:function(){_g.error.serverError("save_"+t.name)}})},refreshView:function(e){var t={containment:null,viewname:null};e=e?$.extend({},t,e):t,this.length>0&&(_.each(this.at(0).iViewlist,(function(t){var n=e.containment||t.containment;n&&(t.wrap&&!$(n).is(t.wrap)?$(n).children(t.wrap).empty():$(n).empty())})),this.each((function(t){e.containment&&(t.iview.containment=e.containment),e.viewname?t[viewname].update():t.iview.update()})))},removeAllViews:function(e){this.each((function(t){t.removeAllViews(e)}))}};return e=e?$.extend(!0,{},t,e):t,Backbone.Collection.extend(e)},createTreeByData:function(e){var t,n={collection:null,data:null,treeLevel:0,parent:null},i=e.parent;if((e=e?$.extend(!0,{},n,e):n).parent=i,!e.collection||!e.data)return null;var r=$.extend(!0,[],e.data);if("function"==typeof e.collection)t=new e.collection;else{var a=_g.mvc.createCollection(e.collection);t=new a}return t.parent=i,t.refreshTreeView=function(e){this.refreshView(e),this.each((function(t){t.icollection.refreshTreeView({containment:t.iview.$el,viewname:e?e.viewname:null})}))},t.getModels=function(){return _g.mvc.getTreeModels(t)},t.getModelsJSON=function(){var e=t.getModels();return e=(0,_map.default)(_).call(_,e,(function(e){return e.toJSON()}))},t.getModel=function(e){return _g.mvc.getTreeModel(t,e)},t.on("add",(function(n){n.treeLevel=e.treeLevel,n.icollection=_g.mvc.createTreeByData({collection:e.collection,data:[],treeLevel:e.treeLevel+1}),t.parent&&(t.View="object"==(0,_typeof2.default)(t.View)?$.extend(!0,{},t.View,{containment:t.parent.iview.$el}):t.View.extend({containment:t.parent.iview.$el})),n.addView("iview",t.View),_g.ui.sortByIds({containment:n.iview.wrap?n.iview.$el.parent(n.iview.wrap):n.iview.$el.parent(),ids:t.pluck("id")}),n.icollection.parent=n,n.icollection.View=t.View})),t.saveAll=function(e){var t=this.saveUrl;if(!t)return!1;var n=_g.mvc._CollectionforSaveAll();n.data=_g.mvc.getTreeData(this),n.url=t,n.save({},{wait:!0,success:function(t,n){e&&e(n)},error:function(){}})},_.each(r,(function(n){var i;i=n.children?$.extend(!0,[],n.children):[],delete n.children,t.add(n,{silent:!0});var r=t.at(t.length-1);r.treeLevel=e.treeLevel,r.icollection=_g.mvc.createTreeByData({collection:e.collection,data:i,treeLevel:e.treeLevel+1,parent:r})})),t},createTreeView:function(e){var t={collection:null,view:null,containment:null,wrap:null,wrapClassName:null,template:null,className:null,parseTemplate:null,templateKey:null,templateName:null,update:function(e){if(!this.model||!this.template||!this.containment)return!1;if(_g.util.domExist(this.$el)){var t,n=this.createEl();this.wrap&&this.$el.children(this.wrap).detach(),this.undelegateEvents(),this.model.get("is_flow")&&$((0,_find.default)(n).call(n,".interaction-area-zoom")).append('<i style="position:absolute;right:0;bottom:0;z-index:9999" class="fa fa-building" aria-hidden="true"></i>'),this.$el.replaceWith(n),this.setElement(n),(0,_find.default)(t=$("div.doc-layout-left")).call(t,"li.pageitem").removeClass("active"),this.$el.addClass("active")}else this.render();this.afterUpdate&&this.afterUpdate(this)}},n=e.collection,i={};if((e=e?$.extend(!0,{},t,e):t).collection=n,!e.collection||!e.view)return!1;e.containment&&(i.containment=e.containment),e.wrap&&(i.wrap=e.wrap),e.template&&(i.template=e.template),e.templateKey&&(i.templateKey=e.templateKey),e.templateName&&(i.templateName=e.templateName),e.parseTemplate&&(i.parseTemplate=e.parseTemplate),e.parseData&&(i.parseData=e.parseData),e.callback&&(i.callback=e.callback),e.wrapClassName&&(i.wrapClassName=e.wrapClassName),e.className&&(i.className=e.className),i.update=e.update;var r="function"==typeof e.view?e.view.extend(i):$.extend(!0,e.view,i);e.collection.View=r,e.collection.each((function(t){if(t.addView("iview",r),t.icollection){if(e.useJquerySel){i=e.containment.children('[id="'+t.id+'"]');if(e.wrap)if(i.children(e.wrap+e.wrapClassName?"."+e.wrapClassName:"").length)i=i.children(e.wrap+e.wrapClassName?"."+e.wrapClassName:"");else{var n=$(document.createElement(e.wrap));i.append(n),e.wrapClassName&&n.addClass(e.wrapClassName),i=n}}else{"string"!=typeof e.containment&&(e.containment=e.containment.selector);var i=e.containment+(e.wrap?" >"+e.wrap:"")+' >[id="'+t.id+'"]'}_g.mvc.createTreeView({collection:t.icollection,view:e.view,wrapClassName:e.wrapClassName,containment:i,wrap:e.wrap||null,template:e.template||null,useJquerySel:e.useJquerySel})}}))},sortTreeByIds:function(e){var t={collection:null,ids:null,treeLevel:0,silent:!0},n=e.collection;if((e=e?$.extend(!0,{},t,e):t).collection=n,!e.collection||!e.ids)return!1;var i=new Backbone.Collection;return i.add(_g.mvc.getTreeModels(e.collection)),function t(n,r,a){return n?(n.reset([],{silent:e.silent}),_.each(r,(function(r){r.children=r.children||[];var o=i.get(r.id);o.treeLevel=a,o.icollection=t(o.icollection,r.children,a+1),n.add(o,{silent:e.silent}),o.collection=n})),n):null}(e.collection,e.ids,e.treeLevel)},getTreeModels:function(e){var t=[];return e.each((function(e){if(t.push(e),e.icollection)for(var n=_g.mvc.getTreeModels(e.icollection),i=0;i<n.length;i++)t.push(n[i])})),t},getTreeModel:function(e,t){if(!e||!t)return!1;var n=_g.mvc.getTreeModels(e);return(0,_find.default)(_).call(_,n,(function(e){return e.id==t}))},getTreeData:function(e,t){var n=[];return e.each((function(e){var i=$.extend(!0,{},e.toJSON());t&&(0,_filter.default)(t)&&(i=_.pick(i,(0,_filter.default)(t))),e.icollection&&(i.children=_g.mvc.getTreeData(e.icollection,t)),n.push(i)})),n},moveTo:function(e){null==e.silent&&(e.silent=!0);var t=null;if(null!=e.fromIndex&&null!=e.toIndex)t=e.collection.at(e.fromIndex),e.collection.remove(t,{silent:e.silent}),e.collection.add(t,{at:e.toIndex,silent:e.silent});else if(null!=e.sourceId&&null!=e.targetId&&null!=e.position){var n;t=e.collection.get(e.sourceId),e.collection.remove(t,{silent:e.silent});var i=e.collection.get(e.targetId),r=(0,_indexOf.default)(n=e.collection).call(n,i);if(-1==e.position)var a=r;else a=r+1;e.collection.add(t,{at:a,silent:e.silent})}},sent:function sent(url,data,callback){var modelstructure=Backbone.Model.extend({initialize:function(){this.set("id","GlobalSave")},sync:function(e,t,n){this.attributes=data,"create"!=e&&("update"==e&&(n.url=url),"delete"!=e&&"read"!=e&&(Backbone.emulateHTTP=!0,Backbone.emulateJSON=!0,Backbone.sync(e,t,n)))}}),model=new modelstructure;model.save({},{wait:!0,success:function success(m,response){$(".action-save").length>0&&$(".action-save").button();var returned=eval(response);callback(response)},error:function(){$(".action-save").button("reset"),interaction.message("error","服务器请求未应答"),$(document).trigger("server_error")}})}};__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(759),__webpack_require__(845),__webpack_require__(807),__webpack_require__(1044),__webpack_require__(1983)],__WEBPACK_AMD_DEFINE_RESULT__=function(){return window._g.mvc=_g_mvc,_g_mvc=void 0,window._g.mvc}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),void 0===__WEBPACK_AMD_DEFINE_RESULT__||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)}()}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),void 0===__WEBPACK_AMD_DEFINE_RESULT__||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)},1044:function(e,t,n){var i,r;i=[n(78)],void 0===(r=function(a){"use strict";var o,l,s=n(0);a=s(a),o=n(775),l={buttonGroupT:['<div class="_g_btn_group <%=opts.className||""%>">',"</div>"].join(""),buttonT:'   <button class="btn _g_btn _g_btn_confirm <%=opts.className||""%>" type="button" data-name="<%=opts.name%>"><%=opts.name%></button>',buttonGroupList:[],scale:function(e,t){$(e).css("zoom",t).css("-moz-transform","scale("+t+")").css("-o-transform","scale("+t+")")},center:function(e){var t={containment:null};if(!(e="string"==typeof e?{containments:null,Item:e}:e?$.extend({},t,e):t).Item)return!1;$(e.Item).css({left:"50%",top:"50%","margin-top":function(){return-($(this).height()/2+50)},"margin-left":function(){return-$(this).width()/2}})},centerImage:function(e){var t={containment:null,parentWidth:null,parentHeight:null,width:null,height:null,setParent:!0};if(!(e=e?$.extend({},t,e):t).Item||!e.containment)return!1;var n=0,i=0;return e.setParent&&$(e.containment).css({"line-height":e.parentHeight+"px","text-align":"center"}),e.width/e.height>=e.parentWidth/e.parentHeight?($(e.Item).css({width:"100%",height:"auto","verticle-align":"middle"}),i=e.parentWidth,n=e.parentWidth/(e.width/e.height)):($(e.Item).css({width:"auto",height:"100%","verticle-align":"middle"}),n=e.parentHeight,i=e.parentHeight*(e.width/e.height)),{width:i,height:n}},fitImage:function(e){if(!e)return!1;if(e.fit||(e.fit=0),e.containment)switch($(e.containment).css({"background-repeat":"no-repeat","background-position":"50% 50%"}),e.fit){case 0:$(e.containment).css({"background-size":"100%"});break;case 1:$(e.containment).css({"background-size":"contain"});break;case 2:$(e.containment).css({"background-size":"cover"})}else e.items&&$(e.items).each((function(){var t=$(this);null==e.width&&(e.width=$(this).width()),null==e.height&&(e.height=$(this).height());var n=e.width,i=e.height,r=$(this).parent();if(e.parentHeight=e.parentHeight||r.height(),e.parentWidth=e.parentWidth||r.width(),0==e.fit&&(t.css({width:"100%",height:"100%",top:"",left:""}),t.addClass("fullsize bk_full"),t.removeClass("bk_contain bk_cover"),n=e.parentWidth,i=e.parentHeight),1==e.fit)if(r.css({"line-height":e.parentHeight-(e.borderH||0)+"px"}),e.useMargin||(r.css("text-align","center"),r.removeClass("bk_cover bk_full"),r.addClass("aligncenter bk_contain")),e.width/e.height>=e.parentWidth/e.parentHeight){if(n=e.parentWidth,i=e.parentWidth/(e.width/e.height),t.css({width:"100%",height:"auto","vertical-align":"middle",left:"",top:"",display:"inline-block",position:"relative"}),e.useMargin){var a=e.parentWidth/(e.width/e.height);t.css("margin-top",(e.parentHeight-a)/2+"px"),t.css("margin-bottom",(e.parentHeight-a)/2+"px"),t.css({"margin-left":0,"margin-right":0}),t.css("position","absolute")}}else if(i=e.parentHeight,n=e.parentHeight*(e.width/e.height),t.css({width:"auto",height:"100%","vertical-align":"top",left:"",top:"",display:"inline-block",position:"relative"}),e.useMargin){var o=e.parentHeight*(e.width/e.height);t.css("margin-left",(e.parentWidth-o)/2+"px"),t.css("margin-right",(e.parentWidth-o)/2+"px"),t.css({"margin-top":0,"margin-bottom":0}),t.css("position","absolute")}2==e.fit&&(r.css({"line-height":e.parentHeight+"px","text-align":"center",overflow:"hidden"}),r.removeClass("bK_full bk_contain"),r.addClass("aligncenter overflowhidden bk_cover"),e.width/e.height>=e.parentWidth/e.parentHeight?(t.css({width:e.parentHeight*e.width/e.height+"px",height:e.parentHeight+"px","verticle-align":"middle",position:"absolute",left:"-"+(e.parentHeight*e.width/e.height-e.parentWidth)/2+"px",top:0,"max-width":"none"}),e.useMargin&&(t.css("left",""),t.css("margin-left","-"+(e.parentHeight*e.width/e.height-e.parentWidth)/2+"px"))):(t.css({position:"absolute",width:e.parentWidth+"px",height:e.parentWidth/(e.width/e.height)+"px","verticle-align":"middle",top:"-"+(e.parentWidth/(e.width/e.height)-e.parentHeight)/2+"px",left:0,"max-height":"none"}),e.useMargin&&(t.css("top",""),t.css("margin-top","-"+(e.parentWidth/(e.width/e.height)-e.parentHeight)/2+"px")))),e.explicitSize&&t.css({width:n,height:i})}))},opacity:function(e,t){},addShade:function(e){var t={name:"_g_shadow",zindex:99999,color:"#000000",opacity:.8,containment:"body"};e=e?$.extend({},t,e):t,$(e.containment).append('<div id="'+e.name+'" style="z-index:'+e.zindex+";background:"+e.color+";opacity:"+e.opacity+';"></div>')},addButtonGroup:function(e){var t={containment:null,position:0,name:"_g_button"+window._g.uuid(),className:null,confirmButton:{name:"确认",enable:!0,className:"btn-small btn-primary",onClick:null},cancelButton:{name:"取消",enable:!0,className:"btn-small",onClick:null},remove:function(){e.$el&&e.$el.remove()},getButton:function(t){var n;return(0,a.default)(n=e.$el).call(n,'[data-name="'+t+'"]')},addButton:function(t){var n={name:null,className:null,onClick:null};if(!(t=t?$.extend(!0,{},n,t):n).name)return!1;e.$el.append(o.template(window._g.ui.buttonT,{opts:t})),t.onClick&&e.getButton(t.name).on("click",(function(){t.onClick()}))},removeButton:function(t){var n;t&&(0,a.default)(n=e.$el).call(n,'[data-name="'+t+'"]').remove()}};return!!(e=e?$.extend(!0,{},t,e):$.extend(!0,{},t)).containment&&(0==e.position?($(e.containment).append(o.template(window._g.ui.buttonGroupT,{opts:e})),e.$el=$(e.containment).children("._g_btn_group")):($(o.template(window._g.ui.buttonGroupT,{opts:e})).insertAfter($(e.containment)),e.$el=$(e.containment).next("._g_btn_group")),e.confirmButton.enable&&e.addButton(e.confirmButton),e.cancelButton.enable&&e.addButton(e.cancelButton),e)},contenteditable:function(e){var t={eventType:0,mutiple:0,element:null,callback:null,type:0,enableControl:!1};if((e=e?$.extend(!0,{},t,e):$.extend(!0,{},t)).onKeyDown=function(t,n){13==(t.keyCode?t.keyCode:t.which)&&0==e.mutiple&&(e.enableClose=!0,e.$this.blur(),$(document).off("keydown",e.onKeyDown),e.result())},e.result=function(){if(e.$this.data("before")!==e.$this.html()){e.$this.data("before",e.$this.html());var t=0==e.type?e.$this.text():e.$this.html();e.callback&&e.callback(t)}},e.enableEdit=!1,!e.element)return!1;e.element&&(e.$this=$(e.element),e.$this.addClass("_g_contenteditable"),0==e.eventType&&$(e.element).attr("contenteditable","true"),1==e.eventType&&($(e.element).attr("contenteditable","false"),$(e.element).on("dblclick",(function(){$(this).attr("contenteditable","true"),$(this).focus()}))),$(e.element).on("focus",(function(){return!e.focus&&(e.focus=!0,e.$this.data("before",e.$this.html()),$(document).on("keydown",e.onKeyDown),e.enableControl&&(e.buttonGroup=window._g.ui.addButtonGroup({containment:e.$this,position:1,confirmButton:{onClick:function(){e.enableClose=!0,e.$this.blur()}},cancelButton:{onClick:function(){e.enableClose=!0,e.$this.html(e.$this.data("before")),e.$this.blur()}}})),e.$this)})).on("blur",(function(t){if(t.preventDefault(),e.enableControl){if(!e.enableClose)return void e.$this.focus();e.enableClose=!1,e.buttonGroup.remove()}return e.focus=!1,$(document).off("keydown",e.onKeyDown),1==e.eventType&&$(e.element).attr("contenteditable","false"),e.result(),!1})))},sortByIds:function(e){var t={containment:null,items:"li",ids:null};(e=e?$.extend({},t,e):t).containment&&e.ids&&o.each(e.ids,(function(t){if($(e.containment).children(e.items+'[id="'+t+'"]').length>0){var n=$(e.containment).children(e.items+'[id="'+t+'"]').detach();$(e.containment).append(n)}}))},sortTreeByIds:function(e,t){var n={containment:null,items:"li",ids:null,childrenKey:"children",wrap:"ul",wrapClass:null};(e=e?$.extend({},n,e):n).containment&&e.ids&&(e.root=t||e.containment,o.each(e.ids,(function(n){var i,r;if((0,a.default)(i=$(e.root)).call(i,e.items+'[id="'+n.id+'"]').length>0){var o,l=(0,a.default)(o=$(e.root)).call(o,e.items+'[id="'+n.id+'"]').detach();$(e.containment).is(e.wrap)||$(e.containment).children(e.wrap).length||($(e.containment).append(document.createElement(e.wrap)),e.containment=$(e.containment).children(e.wrap)),e.wrapClass&&$(e.containment).addClass(e.wrapClass),$(e.containment).append(l)}n[e.childrenKey]&&window._g.ui.sortTreeByIds({containment:(0,a.default)(r=$(e.containment)).call(r,e.items+'[id="'+n.id+'"]'),items:e.items,ids:n[e.childrenKey],childrenKey:e.childrenKey,wrapClass:e.wrapClass},t||e.containment)})))},findById:function(e){var t,n={containment:null,id:null};return(e=e?$.extend({},n,e):n).containment&&e.id?(0,a.default)(t=$(e.containment)).call(t,'[id="'+e.id+'"],[data-id="'+e.id+'"]').first():[]},moveTo:function(e){var t={containment:null,sourceId:null,targetId:null,wrap:null,wrapClass:null,position:0};if(!(e=e?$.extend({},t,e):t).containment)return!1;var n=window._g.ui.findById({containment:e.containment,id:e.sourceId}),i=window._g.ui.findById({containment:e.containment,id:e.targetId});e.wrap&&(0==i.has(e.wrap).length?(i.append(document.createElement(e.wrap)),i=i.children(e.wrap),e.wrapClass&&i.addClass(e.wrapClass)):i=i.children(e.wrap));var r=n.detach();0==e.position?i.prepend(r):i.append(r)},getTreeIds:function(e){var t={containment:null,items:null,idAttribute:"id",wrap:"ul"};e=e?$.extend({},t,e):t;var n=[];if(!e.containment||!e.items)return!1;if(e.wrap)if($(e.containment).is(e.wrap));else{if(!($(e.containment).children("ul").length>0))return[];e.containment=$(e.containment).children("ul")}return $(e.containment).children(e.items).each((function(){var t={};t.id=$(this).attr(e.idAttribute),t.children=window._g.ui.getTreeIds({containment:$(this),items:e.items,idAttribute:e.idAttribute,wrap:e.wrap}),n.push(t)})),n},dialog:function(e){},createDomMask:function(e){var t={containment:null,item:null,x:null,y:null,height:null,width:null,moveTo:function(t){e.offsetX=0-t.x,e.offsetY=0-t.y,$(e.item).css("left",e.offsetX),$(e.item).css("top",e.offsetY)},resize:function(t){$(e.containment).width(t.w),$(e.containment).height(t.h)}};return!(!(e=e?$.extend({},t,e):t).containment||!e.item)&&($(e.containment).css("overflow","hidden"),e.moveTo({x:e.x,y:e.y}),e.resize({w:e.width,h:e.height}),e)},clearSelection:function(){document.selection&&document.selection.empty?document.selection.empty():window.getSelection&&window.getSelection().removeAllRanges()},isOverflowed:function(e){var t={x:!1,y:!1},n=$(e)[0];if(!n)return t;var i=1==$.zoom?0:2;return n.offsetHeight+i<n.scrollHeight&&(t.y=n.scrollHeight||1),n.offsetWidth+i<n.scrollWidth&&(t.x=n.scrollWidth||1),t}},i=[n(759),n(807),n(1373)],void 0===(r=function(){return window._g.ui=l,window._g.ui}.apply(t,i))||(e.exports=r)}.apply(t,i))||(e.exports=r)},1056:function(e,t,n){var i,r;i=[t,n(995)],void 0===(r=function(e,t){"use strict";var i=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.currentPageRxBus=e.pageRxBus=void 0;var r=new((t=i(t)).default);e.pageRxBus=r;var a=new t.default;e.currentPageRxBus=a,r.register(["load","render","clear"]),r.register(["masterPlay","backgroundPlay"]),a.register(["changed","play","end","stop","pause","resume","scroll"])}.apply(t,i))||(e.exports=r)},1168:function(e,t,n){var i,r;i=[n(213),n(14),n(154),n(78),n(378)],void 0===(r=function(t,i,r,a,o){"use strict";var l=n(0);i=l(i),r=l(r),a=l(a),n(1043),n(861),n(849),n(1383),n(1384),n(1185),n(1986),n(1390);var s=n(775);window.docConst={};function c(e){var t,n,a,o=function(e){return{typeUsed:function(e){var t,n,a,o,l;return(0,i.default)(t=(0,r.default)(n=(0,i.default)(a=(0,r.default)(o=s.chain([e.layers,e.masters,e.backgrounds,(0,i.default)(l=e.chapter).call(l,(function(e){return e.children}))]).flatten()).call(o,(function(e){return e}))).call(a,(function(e){return e.overlays})).flatten()).call(n,(function(e){return e}))).call(t,(function(e){return e.iType})).uniq().value()}(e)}}(e);window.docConst.HAS_3D_OVERLAY=(t=["layerround","layerpano","layerlongtake"],n=o.typeUsed,a=function(e){return e.toLowerCase()},s.intersection((0,i.default)(t).call(t,a),(0,i.default)(n).call(n,a))).length>0}var u={defaults:{id:"doc",play_mode:0},autoUpdate:!1,fetchUrl:context_url+"index.json",parse:function(e){return c((e={data:e}).data),window.emulateLandscape.available||window.docConst.HAS_3D_OVERLAY||$(".slides-wrap").css("transform","none"),interaction_view.size={x:e.data.width||1024,y:e.data.height||768},"undefined"!=typeof config_player&&window.config_player&&(interaction_view.size={x:375,y:603}),interaction_view.screen_mode=e.data.screen_mode,!interaction_view.isIos&&e.data.force_3d&&interaction_view.ismobile?interaction_view.force3D="auto":interaction_view.force3D=!1,this.initShareApp(e),this.initEnvironment(),"undefined"!=typeof configpage&&configpage.init(e),this.initMasters(e),this.initBackgrounds(e),this.initLayers(e),this.initPages(e),this.initComponents(e),this.initApplications(e),"undefined"!=typeof e_api&&this.initApi(e),this.initDbs(e),this.initGlobals(e),interaction_view.ismobile||interaction_view.forpreview||(e.data.bg_color=null!=e.data.desktop_bg_color?e.data.desktop_bg_color:e.data.bg_color,e.data.bg_opacity=null!=e.data.desktop_bg_opacity?e.data.desktop_bg_opacity:e.data.bg_opacity,e.data.screen_mode=null!=e.data.desktop_screen_mode?e.data.desktop_screen_mode:e.data.screen_mode,e.data.show_excontent=null!=e.data.desktop_show_excontent?e.data.desktop_show_excontent:e.data.show_excontent,e.data.adapt=null!=e.data.desktop_adapt?e.data.desktop_adapt:e.data.adapt),s.omit(e.data,"layers","masters","chapter","organization","applications")},initMasters:function(e){var t=n(1185);e.data.masters||(e.data.masters=[]),interaction_view.imasterlist=_g.mvc.createTreeByData({collection:t,data:e.data.masters})},initBackgrounds:function(e){var t=n(1185);e.data.backgrounds||(e.data.backgrounds=[]),interaction_view.ibackgroundlist=_g.mvc.createTreeByData({collection:t,data:e.data.backgrounds})},initLayers:function(e){var t=n(1384);e.data.layers||(e.data.layers=[]),interaction_view.ilayerlist=_g.mvc.createTreeByData({collection:t,data:e.data.layers})},initComponents:function(e){var t=n(1390);e.data.components||(e.data.components=[]),interaction_view.iComponentlist=_g.mvc.createTreeByData({collection:t,data:e.data.components})},initPages:function(e){var t,i=n(861);t=e.data.chapter,interaction_view.ipagelist=_g.mvc.createTreeByData({collection:i,data:t}),_g.mvc.createTreeView({collection:interaction_view.ipagelist,view:n(849),containment:"div.slides",wrap:null}),interaction_view.ipagelist.getPages()[0].isFirstPage=!0},initApplications:function(e){interaction_view.applications=e.data.applications,interaction_view.actionforapp={},interaction_view.application.buttons=[],interaction_view.application.buttonGroups=[],s.each(interaction_view.applications,(function(e){"form"==e.type&&interaction_view.application.initForm(e),e.actions&&e.actions.length&&(interaction_view.actionforapp[e.id]=new interaction_view.collection.Action,interaction_view.actionforapp[e.id].add(e.actions),interaction_view.actionforapp[e.id].each((function(e){e.iview.render()})))}))},initShareApp:function(e){interaction_view.shareapp={id:""},e.data.shareapp&&""!=e.data.shareapp.id&&(interaction_view.shareapp=e.data.shareapp,interaction_view.environment.Shareapp.init())},initEnvironment:function(){interaction_view.environment.Sharedata.init(),interaction_view.environment.Userdata.init()},initApi:function(e){e_api._initialize(e.data.api_data||[])},initDbs:function(e){e=e.data.dbs;var t=Backbone.Model.extend({defaults:{id:"",querys:[],sheet_id:"",fields:[]}}),n=Backbone.Collection.extend({model:t});interaction_view.dblist=new n,s.each(e,(function(e){interaction_view.dblist.add({id:e.id,querys:e.iDetail.querys,sheet_id:e.iDetail.sheet_id,fields:e.iDetail.fields})})),(new window.dboperate).query()},initGlobals:function(e){e=e.data.globals;interaction_view.DEBUG&&((0,a.default)(s).call(s,e,(function(e){return"Debug"==e.iType}))||e.push({id:"debug"+_g.uuid(3),iType:"Debug",iDetail:{}}));var t=Backbone.Model.extend({initialize:function(){interaction_view.view[this.get("iType")]&&(this.iview=new(interaction_view.view[this.get("iType")])({model:this}))}}),n=Backbone.Collection.extend({model:t});interaction_view.globallist=new n,s.each(e,(function(e){"GlobalVariable"==e.iType&&0==e.iDetail.iKind&&(e.iDetail.initial=(Number(e.iDetail.initial)||0).toFixed(Number(e.iDetail.precision)||0)),interaction_view.globallist.add(e)})),s.each(interaction_view.globallist.models,(function(e,t){2==e.attributes.iDetail.iKind&&(e.attributes.iDetail.initial=interaction_view.setRandom(e.attributes.iDetail))}))},callback:function(){}};e.exports=_g.mvc.createModel(u)}.apply(t,i))||(e.exports=r)},1184:function(e,t){e.exports='<section class="Presentation" id="<%=id%>">\n    <div class="interaction-area typo">\n      <div class="interaction-view"></div>\n   </div>\n</section>'},1185:function(e,t,n){var i;void 0===(i=function(){"use strict";n(861),n(1386),n(1387);var t=n(861).extend({model:n(1386)});e.exports=t}.apply(t,[]))||(e.exports=i)},1186:function(e,t,n){var i;void 0===(i=function(){"use strict";n(848);var t=n(848).extend({defaults:{iType:"Component",bg_color:"#FFFFFF",bg_opacity:1},callback:function(){this.actions=this.get("actions"),this.animations=this.get("animations"),this.overlays=this.get("overlays")}});e.exports=t}.apply(t,[]))||(e.exports=i)},1188:function(e,t,n){var i,r;i=[t,n(995)],void 0===(r=function(e,t){"use strict";var i=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=new((t=i(t)).default);r.register(["initialized","ready","weixinReady","screenCalculated"],"ReplaySubject",1),r.register(["orientationChanged","resize","shake"]);var a=r;e.default=a}.apply(t,i))||(e.exports=r)},1373:function(e,t,n){var i,r;void 0===(r=function(){"use strict";var a;a={log:function(e){},serverError:function(e,t){$(document).trigger("serverError"),0!==t.readyState&&"Network Error"!==t.message||window._g.error.errorSend()},errorSend:function(){try{0==window.epub360.variable.network_error_time?(window.epub360.variable.network_error_time=1,window.interaction.message("error","网络连接超时，请检查您的网络并重新保存。")):window.interaction.modalAlert("出错了","网络连接超时，无法保存您的操作，可能您的网络状况不稳定，请检查您的网络并重新保存。")}catch(e){}}},i=[n(807)],void 0===(r=function(){return window._g.error=a,window._g.error}.apply(t,i))||(e.exports=r)}.apply(t,i=[]))||(e.exports=r)},1374:function(e,t,n){e.exports=n(1984)},1381:function(e,t,n){var i,r;i=[t,n(78)],void 0===(r=function(e,t){"use strict";var i=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.clearPage=e.initPage=void 0,t=i(t);e.initPage=function(e){var n,i=e.model.get("pageid");if(e.model.iPageId=i,e.model.set("isMasterOverlay",!1),e.model.set("isBackgroundOverlay",!1),e.model.set("isConfigOverlay",!1),e.pagetype=e.model.get("pagetype"),e.iType=e.model.get("iType"),"LayerRef"==e.pagetype){var r,a=e.model.get("parentpageid"),o=e.model.get("layerid"),l=interaction_view.getParentpage(a);e.model.page=l.iOverlaylist.get(i).layer[o];var s=l.iOverlaylist.get(i);e.model.ref_id=i,e.container=(0,t.default)(r=s.iview.$el).call(r,".layer-content").children(".layer-item[data-id="+o+"]"),e.model.iPageId=a,e.model.layer_id=o}else if("master"==e.pagetype){var c;interaction_view.touchview?e.container=$(".reveal"):e.container=(0,t.default)(c=$('.reveal .Presentation[id="'+interaction_view.currentPage+'"]')).call(c,".interaction-view"),e.model.set("isMasterOverlay",!0),e.model.isMasterOverlay=!0}else if("background"==e.pagetype){var u;interaction_view.touchview?e.container=$(".reveal"):e.container=(0,t.default)(u=$('.reveal .Presentation[id="'+interaction_view.currentPage+'"]')).call(u,".interaction-view"),e.model.set("isBackgroundOverlay",!0),e.model.isBackgroundOverlay=!0}else if("config"==e.pagetype){var d;e.container=(0,t.default)(d=$(".config_wrap")).call(d,".interaction-view"),e.model.set("isConfigOverlay",!0),e.model.isConfigOverlay=!0,e.model.page=interaction_view.iconfiglist.at(0)}else if(e.model.get("isSubOverlay")){e.path=e.model.get("path");var h=interaction_view.getContainerModelByPath(e.path);e.container=h.iview.$el.children(".Element"),e.model.page=interaction_view.getContainerModelByPath(e.path)}else e.container=i?(0,t.default)(n=$('.reveal .Presentation[id="'+e.model.get("pageid")+'"]')).call(n,".interaction-view"):$(".interaction-view")};e.clearPage=function(e){var n,i,r,a,o,l,s=e;if("string"==typeof e&&(s=interaction_view.getPage(e)),!s)return!1;null!==(n=s)&&void 0!==n&&n.iOverlaylist&&s.iOverlaylist.each((function(e){var t;null!=e&&null!==(t=e.iview)&&void 0!==t&&t.onPageClear&&e.iview.onPageClear()})),(0,t.default)(i=s.iview.$el).call(i,".interaction-view").empty(),null!==(r=s)&&void 0!==r&&null!==(a=r.iAnimationlist)&&void 0!==a&&a.timeline&&s.iAnimationlist.timeline.kill(),s.id&&interaction_view.events.clearRelatedEvents(s.id),null!==(o=s)&&void 0!==o&&null!==(l=o.iview)&&void 0!==l&&l.$el.hasClass("dragConnector")&&window.connector.removeDragController(s.iview.$el)}}.apply(t,i))||(e.exports=r)},1382:function(e,t){e.exports='<section class="group" id="<%=id%>"></section>'},1383:function(e,t,n){var i,r;i=[n(14),n(154),n(984)],void 0===(r=function(t,i,r){"use strict";var a=n(0);t=a(t),i=a(i),n(849);var o=n(775),l=n(849),s=$.extend({},l,{template:null,className:null,containment:null,wrap:null,wrapClassName:null,autoRender:!1,position:1,parseData:null,afterload:function(){var e=this,n=this.model.get("iDetail").layer_ids,a=this.model.offset?this.model.offset:{x:0,y:0};n&&0!=n.length&&(o.each(n,(function(n){var l,s=interaction_view.ilayerlist.get(n)||interaction_view.iComponentlist.get(n);if(s){var c=s.attributes.pano_eid;e.animations=(0,t.default)(o).call(o,s.animations,(function(t){return t.pageid=e.model.id,t.parentpageid=e.model.get("pageid"),t.pagetype="LayerRef",t.layerid=n,t.pano_eid=c,t})),e.model.layer[n].iAnimationlist.reset(e.animations),s.overlays=(0,r.refactorLayerOverlays)(s.overlays,n),l=(0,i.default)(o).call(o,s.overlays,(function(e){return interaction_view.model[e.iType]})),l=(0,t.default)(o).call(o,l,(function(t){var i=$.extend(!0,{},t);return i.pageid=e.model.id,i.parentpageid=e.model.get("pageid"),i.pagetype="LayerRef",i.layerid=n,i.path=e.model.layer[n].iOverlaylist.path,i.isSubOverlay=!0,i.isLayerOverlay=!0,a.x&&(i._offset_x=a.x),a.y&&(i._offset_y=a.y),i.pano_eid=c,i.iCommon.landscape.iStarty=i.iCommon.landscape.iStarty+a.y,i.iCommon.landscape.iStartx=i.iCommon.landscape.iStartx+a.x,new interaction_view.model[t.iType](i)})),e.model.layer[n].iOverlaylist.reset(l),e.actions=(0,t.default)(o).call(o,s.actions,(function(t){return t.pageid=e.model.id,t.parentpageid=e.model.get("pageid"),t.pagetype="LayerRef",t.layerid=n,t.pano_eid=c,t})),e.model.layer[n].iActionlist.reset(s.actions),e.model.layer[n].isLayer=!0}})),e.startLayerLoad())},startLayerLoad:function(){var e=this;o.each(this.model.layer,(function(t,n){0==t.ipreloadlist.length?e.model.iview.afterlayerload(n):t.ipreloadlist.preload()}))}});e.exports=s}.apply(t,i))||(e.exports=r)},1384:function(e,t,n){var i;void 0===(i=function(){"use strict";n(861),n(1385);var t=n(861).extend({model:n(1385)});e.exports=t}.apply(t,[]))||(e.exports=i)},1385:function(e,t,n){var i;void 0===(i=function(){"use strict";n(848);var t=n(848).extend({defaults:{iType:"Layer",position:0,description:"",title:"untitled",picture:null,preview:"",thumbnail:null,width:null,height:null,layer_width:1024,layer_height:768,bg_color:"#FFFFFF",bg_opacity:1},callback:function(){this.actions=this.get("actions"),this.animations=this.get("animations"),this.overlays=this.get("overlays")}});e.exports=t}.apply(t,[]))||(e.exports=i)},1386:function(e,t,n){var i;void 0===(i=function(){"use strict";n(848);var t=n(848).extend({defaults:{iType:"Master",position:0,description:"",title:"untitled",picture:null,preview:"",thumbnail:null,width:null,height:null,bg_color:"#FFFFFF",bg_opacity:1,pageno_horizontal:{show:!1,x:500,y:20},pageno_vertical:{show:!1,x:20,y:300}}});e.exports=t}.apply(t,[]))||(e.exports=i)},1387:function(e,t,n){var i;void 0===(i=function(){"use strict";n(849);n(775);var t=n(849),i=$.extend({},t,{template:null,className:null,containment:null,wrap:null,wrapClassName:null,autoRender:!1,position:1,parseData:null,isMaster:!0});e.exports=i}.apply(t,[]))||(e.exports=i)},1388:function(e,t,n){var i;void 0===(i=function(){"use strict";n(848);var t=n(848).extend({defaults:{iType:"Background",position:0,description:"",title:"untitled",picture:null,preview:"",thumbnail:null,width:null,height:null,bg_color:"#FFFFFF",bg_opacity:1,pageno_horizontal:{show:!1,x:500,y:20},pageno_vertical:{show:!1,x:20,y:300}}});e.exports=t}.apply(t,[]))||(e.exports=i)},1389:function(e,t,n){var i,r;i=[n(14),n(154),n(984)],void 0===(r=function(t,i,r){"use strict";var a=n(0);t=a(t),i=a(i),n(849);var o=n(775),l=n(849),s=$.extend({},l,{template:null,className:null,containment:null,wrap:null,wrapClassName:null,autoRender:!1,position:1,parseData:null,isBackground:!0,prepareLoad:function(){var e=this;if(this.model){e.animations=(0,t.default)(o).call(o,e.animations,(function(t){return t.pageid=e.model.id,t.pagetype="background",t})),e.model.iAnimationlist.reset(e.animations);var n=(0,i.default)(o).call(o,e.overlays,(function(t){return interaction_view.doc.attributes.force_landscape||(t=e.animateOffsetPatch(t)),t.pageid=e.model.id,t.pagetype="background",interaction_view.model[t.iType]}));(0,r.renderTreeData)(e,e.overlays,(function(e){n=e})),(0,r.renderZindex)(e,n),e.actions=(0,t.default)(o).call(o,e.actions,(function(t){return t.pageid=e.model.id,t.pagetype="background",t})),e.model.iActionlist.reset(e.actions)}}});e.exports=s}.apply(t,i))||(e.exports=r)},1390:function(e,t,n){var i;void 0===(i=function(){"use strict";n(861),n(1186);var t=n(861).extend({model:n(1186)});e.exports=t}.apply(t,[]))||(e.exports=i)},1391:function(e,t,n){var i,r,a;r=[n(54),n(99),n(339),n(96),n(11)],void 0===(a=function(o,l,s,c,u){"use strict";var d=n(0);l=d(l),s=d(s),c=d(c),u=d(u),r=[],void 0===(a="function"==typeof(i=function(){var e=function(){},t={},n={},i={};function r(e,t){if(e){var r=i[e];if(n[e]=t,r)for(;r.length;)r[0](e,t),(0,l.default)(r).call(r,0,1)}}function a(t,n){t.call&&(t={success:t}),n.length?(t.error||e)(n):(t.success||e)(t)}function o(t,n,i,r){var a,l,s=document,c=i.async,u=(i.numRetries||0)+1,d=i.before||e,h=t.replace(/^(css|img)!/,"");r=r||0,/(^css!|\.css$)/.test(t)?((l=s.createElement("link")).rel="stylesheet",l.href=h,(a="hideFocus"in l)&&l.relList&&(a=0,l.rel="preload",l.as="style")):/(^img!|\.(png|gif|jpg|svg)$)/.test(t)?(l=s.createElement("img")).src=h:((l=s.createElement("script")).src=t,l.async=void 0===c||c),l.onload=l.onerror=l.onbeforeload=function(e){var s=e.type[0];if(a)try{l.sheet.cssText.length||(s="e")}catch(e){18!=e.code&&(s="e")}if("e"==s){if((r+=1)<u)return o(t,n,i,r)}else if("preload"==l.rel&&"style"==l.as)return l.rel="stylesheet";n(t,s,e.defaultPrevented)},!1!==d(t,l)&&s.head.appendChild(l)}function u(e,n,i){var l,u;if(n&&(0,s.default)(n)&&(l=n),u=(l?i:n)||{},l){if(l in t)throw"LoadJS";t[l]=!0}function d(t,n){!function(e,t,n){var i,r,a=(e=e.push?e:[e]).length,l=a,s=[];for(i=function(e,n,i){if("e"==n&&s.push(e),"b"==n){if(!i)return;s.push(e)}--a||t(s)},r=0;r<l;r++)o(e[r],i,n)}(e,(function(e){a(u,e),t&&a({success:t,error:n},e),r(l,e)}),u)}if(u.returnPromise)return new c.default(d);d()}return u.ready=function(e,t){return function(e,t){e=e.push?e:[e];var r,a,o,l=[],s=e.length,c=s;for(r=function(e,n){n.length&&l.push(e),--c||t(l)};s--;)a=e[s],(o=n[a])?r(a,o):(i[a]=i[a]||[]).push(r)}(e,(function(e){a(t,e)})),u},u.done=function(e){r(e,[])},u.reset=function(){t={},n={},i={}},u.isDefined=function(e){return e in t},u})?i.apply(t,r):i)||(e.exports=a)}.apply(t,r))||(e.exports=a)},1392:function(e,t,n){var i=n(396);e.exports=function(e){if(i(e))return e},e.exports.default=e.exports,e.exports.__esModule=!0},1393:function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.default=e.exports,e.exports.__esModule=!0},1980:function(e,t,n){(function(){var n=this,i=n._,r={},a=Array.prototype,o=Object.prototype,l=Function.prototype,s=a.push,c=a.slice,u=a.concat,d=o.toString,h=o.hasOwnProperty,f=a.forEach,p=a.map,v=a.reduce,m=a.reduceRight,g=a.filter,_=a.every,w=a.some,y=a.indexOf,b=a.lastIndexOf,x=Array.isArray,$=Object.keys,k=l.bind,S=function(e){return e instanceof S?e:this instanceof S?void(this._wrapped=e):new S(e)};e.exports&&(t=e.exports=S),t._=S,S.VERSION="1.4.4";var A=S.each=S.forEach=function(e,t,n){if(null!=e)if(f&&e.forEach===f)e.forEach(t,n);else if(e.length===+e.length){for(var i=0,a=e.length;i<a;i++)if(t.call(n,e[i],i,e)===r)return}else for(var o in e)if(S.has(e,o)&&t.call(n,e[o],o,e)===r)return};S.map=S.collect=function(e,t,n){var i=[];return null==e?i:p&&e.map===p?e.map(t,n):(A(e,(function(e,r,a){i[i.length]=t.call(n,e,r,a)})),i)};var E="Reduce of empty array with no initial value";S.reduce=S.foldl=S.inject=function(e,t,n,i){var r=arguments.length>2;if(null==e&&(e=[]),v&&e.reduce===v)return i&&(t=S.bind(t,i)),r?e.reduce(t,n):e.reduce(t);if(A(e,(function(e,a,o){r?n=t.call(i,n,e,a,o):(n=e,r=!0)})),!r)throw new TypeError(E);return n},S.reduceRight=S.foldr=function(e,t,n,i){var r=arguments.length>2;if(null==e&&(e=[]),m&&e.reduceRight===m)return i&&(t=S.bind(t,i)),r?e.reduceRight(t,n):e.reduceRight(t);var a=e.length;if(a!==+a){var o=S.keys(e);a=o.length}if(A(e,(function(l,s,c){s=o?o[--a]:--a,r?n=t.call(i,n,e[s],s,c):(n=e[s],r=!0)})),!r)throw new TypeError(E);return n},S.find=S.detect=function(e,t,n){var i;return T(e,(function(e,r,a){if(t.call(n,e,r,a))return i=e,!0})),i},S.filter=S.select=function(e,t,n){var i=[];return null==e?i:g&&e.filter===g?e.filter(t,n):(A(e,(function(e,r,a){t.call(n,e,r,a)&&(i[i.length]=e)})),i)},S.reject=function(e,t,n){return S.filter(e,(function(e,i,r){return!t.call(n,e,i,r)}),n)},S.every=S.all=function(e,t,n){t||(t=S.identity);var i=!0;return null==e?i:_&&e.every===_?e.every(t,n):(A(e,(function(e,a,o){if(!(i=i&&t.call(n,e,a,o)))return r})),!!i)};var T=S.some=S.any=function(e,t,n){t||(t=S.identity);var i=!1;return null==e?i:w&&e.some===w?e.some(t,n):(A(e,(function(e,a,o){if(i||(i=t.call(n,e,a,o)))return r})),!!i)};S.contains=S.include=function(e,t){return null!=e&&(y&&e.indexOf===y?-1!=e.indexOf(t):T(e,(function(e){return e===t})))},S.invoke=function(e,t){var n=c.call(arguments,2),i=S.isFunction(t);return S.map(e,(function(e){return(i?t:e[t]).apply(e,n)}))},S.pluck=function(e,t){return S.map(e,(function(e){return e[t]}))},S.where=function(e,t,n){return S.isEmpty(t)?n?null:[]:S[n?"find":"filter"](e,(function(e){for(var n in t)if(t[n]!==e[n])return!1;return!0}))},S.findWhere=function(e,t){return S.where(e,t,!0)},S.max=function(e,t,n){if(!t&&S.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.max.apply(Math,e);if(!t&&S.isEmpty(e))return-1/0;var i={computed:-1/0,value:-1/0};return A(e,(function(e,r,a){var o=t?t.call(n,e,r,a):e;o>=i.computed&&(i={value:e,computed:o})})),i.value},S.min=function(e,t,n){if(!t&&S.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.min.apply(Math,e);if(!t&&S.isEmpty(e))return 1/0;var i={computed:1/0,value:1/0};return A(e,(function(e,r,a){var o=t?t.call(n,e,r,a):e;o<i.computed&&(i={value:e,computed:o})})),i.value},S.shuffle=function(e){var t,n=0,i=[];return A(e,(function(e){t=S.random(n++),i[n-1]=i[t],i[t]=e})),i};var C=function(e){return S.isFunction(e)?e:function(t){return t[e]}};S.sortBy=function(e,t,n){var i=C(t);return S.pluck(S.map(e,(function(e,t,r){return{value:e,index:t,criteria:i.call(n,e,t,r)}})).sort((function(e,t){var n=e.criteria,i=t.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(n<i||void 0===i)return-1}return e.index<t.index?-1:1})),"value")};var j=function(e,t,n,i){var r={},a=C(t||S.identity);return A(e,(function(t,o){var l=a.call(n,t,o,e);i(r,l,t)})),r};S.groupBy=function(e,t,n){return j(e,t,n,(function(e,t,n){(S.has(e,t)?e[t]:e[t]=[]).push(n)}))},S.countBy=function(e,t,n){return j(e,t,n,(function(e,t){S.has(e,t)||(e[t]=0),e[t]++}))},S.sortedIndex=function(e,t,n,i){for(var r=(n=null==n?S.identity:C(n)).call(i,t),a=0,o=e.length;a<o;){var l=a+o>>>1;n.call(i,e[l])<r?a=l+1:o=l}return a},S.toArray=function(e){return e?S.isArray(e)?c.call(e):e.length===+e.length?S.map(e,S.identity):S.values(e):[]},S.size=function(e){return null==e?0:e.length===+e.length?e.length:S.keys(e).length},S.first=S.head=S.take=function(e,t,n){if(null!=e)return null==t||n?e[0]:c.call(e,0,t)},S.initial=function(e,t,n){return c.call(e,0,e.length-(null==t||n?1:t))},S.last=function(e,t,n){if(null!=e)return null==t||n?e[e.length-1]:c.call(e,Math.max(e.length-t,0))},S.rest=S.tail=S.drop=function(e,t,n){return c.call(e,null==t||n?1:t)},S.compact=function(e){return S.filter(e,S.identity)};var P=function(e,t,n){return A(e,(function(e){S.isArray(e)?t?s.apply(n,e):P(e,t,n):n.push(e)})),n};S.flatten=function(e,t){return P(e,t,[])},S.without=function(e){return S.difference(e,c.call(arguments,1))},S.uniq=S.unique=function(e,t,n,i){S.isFunction(t)&&(i=n,n=t,t=!1);var r=n?S.map(e,n,i):e,a=[],o=[];return A(r,(function(n,i){(t?i&&o[o.length-1]===n:S.contains(o,n))||(o.push(n),a.push(e[i]))})),a},S.union=function(){return S.uniq(u.apply(a,arguments))},S.intersection=function(e){var t=c.call(arguments,1);return S.filter(S.uniq(e),(function(e){return S.every(t,(function(t){return S.indexOf(t,e)>=0}))}))},S.difference=function(e){var t=u.apply(a,c.call(arguments,1));return S.filter(e,(function(e){return!S.contains(t,e)}))},S.zip=function(){for(var e=c.call(arguments),t=S.max(S.pluck(e,"length")),n=new Array(t),i=0;i<t;i++)n[i]=S.pluck(e,""+i);return n},S.object=function(e,t){if(null==e)return{};for(var n={},i=0,r=e.length;i<r;i++)t?n[e[i]]=t[i]:n[e[i][0]]=e[i][1];return n},S.indexOf=function(e,t,n){if(null==e)return-1;var i=0,r=e.length;if(n){if("number"!=typeof n)return e[i=S.sortedIndex(e,t)]===t?i:-1;i=n<0?Math.max(0,r+n):n}if(y&&e.indexOf===y)return e.indexOf(t,n);for(;i<r;i++)if(e[i]===t)return i;return-1},S.lastIndexOf=function(e,t,n){if(null==e)return-1;var i=null!=n;if(b&&e.lastIndexOf===b)return i?e.lastIndexOf(t,n):e.lastIndexOf(t);for(var r=i?n:e.length;r--;)if(e[r]===t)return r;return-1},S.range=function(e,t,n){arguments.length<=1&&(t=e||0,e=0),n=arguments[2]||1;for(var i=Math.max(Math.ceil((t-e)/n),0),r=0,a=new Array(i);r<i;)a[r++]=e,e+=n;return a},S.bind=function(e,t){if(e.bind===k&&k)return k.apply(e,c.call(arguments,1));var n=c.call(arguments,2);return function(){return e.apply(t,n.concat(c.call(arguments)))}},S.partial=function(e){var t=c.call(arguments,1);return function(){return e.apply(this,t.concat(c.call(arguments)))}},S.bindAll=function(e){var t=c.call(arguments,1);return 0===t.length&&(t=S.functions(e)),A(t,(function(t){e[t]=S.bind(e[t],e)})),e},S.memoize=function(e,t){var n={};return t||(t=S.identity),function(){var i=t.apply(this,arguments);return S.has(n,i)?n[i]:n[i]=e.apply(this,arguments)}},S.delay=function(e,t){var n=c.call(arguments,2);return setTimeout((function(){return e.apply(null,n)}),t)},S.defer=function(e){return S.delay.apply(S,[e,1].concat(c.call(arguments,1)))},S.throttle=function(e,t){var n,i,r,a,o=0,l=function(){o=new Date,r=null,a=e.apply(n,i)};return function(){var s=new Date,c=t-(s-o);return n=this,i=arguments,c<=0?(clearTimeout(r),r=null,o=s,a=e.apply(n,i)):r||(r=setTimeout(l,c)),a}},S.debounce=function(e,t,n){var i,r;return function(){var a=this,o=arguments,l=function(){i=null,n||(r=e.apply(a,o))},s=n&&!i;return clearTimeout(i),i=setTimeout(l,t),s&&(r=e.apply(a,o)),r}},S.once=function(e){var t,n=!1;return function(){return n||(n=!0,t=e.apply(this,arguments),e=null),t}},S.wrap=function(e,t){return function(){var n=[e];return s.apply(n,arguments),t.apply(this,n)}},S.compose=function(){var e=arguments;return function(){for(var t=arguments,n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},S.after=function(e,t){return e<=0?t():function(){if(--e<1)return t.apply(this,arguments)}},S.keys=$||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var n in e)S.has(e,n)&&(t[t.length]=n);return t},S.values=function(e){var t=[];for(var n in e)S.has(e,n)&&t.push(e[n]);return t},S.pairs=function(e){var t=[];for(var n in e)S.has(e,n)&&t.push([n,e[n]]);return t},S.invert=function(e){var t={};for(var n in e)S.has(e,n)&&(t[e[n]]=n);return t},S.functions=S.methods=function(e){var t=[];for(var n in e)S.isFunction(e[n])&&t.push(n);return t.sort()},S.extend=function(e){return A(c.call(arguments,1),(function(t){if(t)for(var n in t)e[n]=t[n]})),e},S.pick=function(e){var t={},n=u.apply(a,c.call(arguments,1));return A(n,(function(n){n in e&&(t[n]=e[n])})),t},S.omit=function(e){var t={},n=u.apply(a,c.call(arguments,1));for(var i in e)S.contains(n,i)||(t[i]=e[i]);return t},S.defaults=function(e){return A(c.call(arguments,1),(function(t){if(t)for(var n in t)null==e[n]&&(e[n]=t[n])})),e},S.clone=function(e){return S.isObject(e)?S.isArray(e)?e.slice():S.extend({},e):e},S.tap=function(e,t){return t(e),e};var R=function(e,t,n,i){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;e instanceof S&&(e=e._wrapped),t instanceof S&&(t=t._wrapped);var r=d.call(e);if(r!=d.call(t))return!1;switch(r){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if("object"!=typeof e||"object"!=typeof t)return!1;for(var a=n.length;a--;)if(n[a]==e)return i[a]==t;n.push(e),i.push(t);var o=0,l=!0;if("[object Array]"==r){if(l=(o=e.length)==t.length)for(;o--&&(l=R(e[o],t[o],n,i)););}else{var s=e.constructor,c=t.constructor;if(s!==c&&!(S.isFunction(s)&&s instanceof s&&S.isFunction(c)&&c instanceof c))return!1;for(var u in e)if(S.has(e,u)&&(o++,!(l=S.has(t,u)&&R(e[u],t[u],n,i))))break;if(l){for(u in t)if(S.has(t,u)&&!o--)break;l=!o}}return n.pop(),i.pop(),l};S.isEqual=function(e,t){return R(e,t,[],[])},S.isEmpty=function(e){if(null==e)return!0;if(S.isArray(e)||S.isString(e))return 0===e.length;for(var t in e)if(S.has(e,t))return!1;return!0},S.isElement=function(e){return!(!e||1!==e.nodeType)},S.isArray=x||function(e){return"[object Array]"==d.call(e)},S.isObject=function(e){return e===Object(e)},A(["Arguments","Function","String","Number","Date","RegExp"],(function(e){S["is"+e]=function(t){return d.call(t)=="[object "+e+"]"}})),S.isArguments(arguments)||(S.isArguments=function(e){return!(!e||!S.has(e,"callee"))}),S.isFunction=function(e){return"function"==typeof e},S.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},S.isNaN=function(e){return S.isNumber(e)&&e!=+e},S.isBoolean=function(e){return!0===e||!1===e||"[object Boolean]"==d.call(e)},S.isNull=function(e){return null===e},S.isUndefined=function(e){return void 0===e},S.has=function(e,t){return h.call(e,t)},S.noConflict=function(){return n._=i,this},S.identity=function(e){return e},S.times=function(e,t,n){for(var i=Array(e),r=0;r<e;r++)i[r]=t.call(n,r);return i},S.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))};var N={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};N.unescape=S.invert(N.escape);var O={escape:new RegExp("["+S.keys(N.escape).join("")+"]","g"),unescape:new RegExp("("+S.keys(N.unescape).join("|")+")","g")};S.each(["escape","unescape"],(function(e){S[e]=function(t){return null==t?"":(""+t).replace(O[e],(function(t){return N[e][t]}))}})),S.result=function(e,t){if(null==e)return null;var n=e[t];return S.isFunction(n)?n.call(e):n},S.mixin=function(e){A(S.functions(e),(function(t){var n=S[t]=e[t];S.prototype[t]=function(){var e=[this._wrapped];return s.apply(e,arguments),F.call(this,n.apply(S,e))}}))};var B=0;S.uniqueId=function(e){var t=++B+"";return e?e+t:t},S.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var I=/(.)^/,M={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"},D=/\\|'|\r|\n|\t|\u2028|\u2029/g;S.template=function(e,t,n){if(S.isFunction(e))return t?e(t):e;var i;n=S.defaults({},n,S.templateSettings);var r=new RegExp([(n.escape||I).source,(n.interpolate||I).source,(n.evaluate||I).source].join("|")+"|$","g"),a=0,o="__p+='",l=e;e.replace(r,(function(t,n,i,r,l){return o+=e.slice(a,l).replace(D,(function(e){return"\\"+M[e]})),n&&(o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),i&&(o+="'+\n((__t=("+i+"))==null?'':__t)+\n'"),r&&(o+="';\n"+r+"\n__p+='"),a=l+t.length,t})),o+="';\n",n.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{i=new Function(n.variable||"obj","_",o)}catch(e){throw e.source=o,e}if(t)return i(t,S);var s=function(e){return i.call(this,e,S)};return s.source="function("+(n.variable||"obj")+"){\n"+o+"}",s.textsource=l,s},S.chain=function(e){return S(e).chain()};var F=function(e){return this._chain?S(e).chain():e};S.mixin(S),A(["pop","push","reverse","shift","sort","splice","unshift"],(function(e){var t=a[e];S.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!=e&&"splice"!=e||0!==n.length||delete n[0],F.call(this,n)}})),A(["concat","join","slice"],(function(e){var t=a[e];S.prototype[e]=function(){return F.call(this,t.apply(this._wrapped,arguments))}})),S.extend(S.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}).call(this)},1981:function(e,t,n){(function(){var i,r=window||this,a=r.Backbone,o=[],l=o.push,s=o.slice,c=o.splice;i=t,e.exports&&(t=e.exports=i),i.VERSION="0.9.10";var u=r._;u||(u=n(775)),i.$=r.jQuery||r.Zepto||r.ender,i.noConflict=function(){return r.Backbone=a,this},i.emulateHTTP=!1,i.emulateJSON=!1;var d=/\s+/,h=function(e,t,n,i){if(!n)return!0;if("object"==typeof n)for(var r in n)e[t].apply(e,[r,n[r]].concat(i));else{if(!d.test(n))return!0;for(var a=n.split(d),o=0,l=a.length;o<l;o++)e[t].apply(e,[a[o]].concat(i))}},f=function(e,t){var n,i=-1,r=e.length;switch(t.length){case 0:for(;++i<r;)(n=e[i]).callback.call(n.ctx);return;case 1:for(;++i<r;)(n=e[i]).callback.call(n.ctx,t[0]);return;case 2:for(;++i<r;)(n=e[i]).callback.call(n.ctx,t[0],t[1]);return;case 3:for(;++i<r;)(n=e[i]).callback.call(n.ctx,t[0],t[1],t[2]);return;default:for(;++i<r;)(n=e[i]).callback.apply(n.ctx,t)}},p=i.Events={on:function(e,t,n){return h(this,"on",e,[t,n])&&t?(this._events||(this._events={}),(this._events[e]||(this._events[e]=[])).push({callback:t,context:n,ctx:n||this}),this):this},once:function(e,t,n){if(!h(this,"once",e,[t,n])||!t)return this;var i=this,r=u.once((function(){i.off(e,r),t.apply(this,arguments)}));return r._callback=t,this.on(e,r,n),this},off:function(e,t,n){var i,r,a,o,l,s,c,d;if(!this._events||!h(this,"off",e,[t,n]))return this;if(!e&&!t&&!n)return this._events={},this;for(l=0,s=(o=e?[e]:u.keys(this._events)).length;l<s;l++)if(e=o[l],i=this._events[e]){if(a=[],t||n)for(c=0,d=i.length;c<d;c++)r=i[c],(t&&t!==r.callback&&t!==r.callback._callback||n&&n!==r.context)&&a.push(r);this._events[e]=a}return this},trigger:function(e){if(!this._events)return this;var t=s.call(arguments,1);if(!h(this,"trigger",e,t))return this;var n=this._events[e],i=this._events.all;return n&&f(n,t),i&&f(i,arguments),this},listenTo:function(e,t,n){return(this._listeners||(this._listeners={}))[e._listenerId||(e._listenerId=u.uniqueId("l"))]=e,e.on(t,"object"==typeof t?this:n,this),this},stopListening:function(e,t,n){var i=this._listeners;if(i){if(e)e.off(t,"object"==typeof t?this:n,this),t||n||delete i[e._listenerId];else{for(var r in"object"==typeof t&&(n=this),i)i[r].off(t,n,this);this._listeners={}}return this}}};p.bind=p.on,p.unbind=p.off,u.extend(i,p);var v=i.Model=function(e,t){var n,i=e||{};this.cid=u.uniqueId("c"),this.attributes={},t&&t.collection&&(this.collection=t.collection),t&&t.parse&&(i=this.parse(i,t)||{}),(n=u.result(this,"defaults"))&&(i=u.defaults({},i,n)),this.set(i,t),this.changed={},this.initialize.apply(this,arguments)};u.extend(v.prototype,p,{changed:null,idAttribute:"id",initialize:function(){},toJSON:function(e){return u.clone(this.attributes)},sync:function(){return i.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return u.escape(this.get(e))},has:function(e){return null!=this.get(e)},set:function(e,t,n){var i,r,a,o,l,s,c,d;if(null==e)return this;if("object"==typeof e?(r=e,n=t):(r={})[e]=t,n||(n={}),!this._validate(r,n))return!1;for(i in a=n.unset,l=n.silent,o=[],s=this._changing,this._changing=!0,s||(this._previousAttributes=u.clone(this.attributes),this.changed={}),d=this.attributes,c=this._previousAttributes,this.idAttribute in r&&(this.id=r[this.idAttribute]),r)t=r[i],u.isEqual(d[i],t)||o.push(i),u.isEqual(c[i],t)?delete this.changed[i]:this.changed[i]=t,a?delete d[i]:d[i]=t;if(!l){o.length&&(this._pending=!0);for(var h=0,f=o.length;h<f;h++)this.trigger("change:"+o[h],this,d[o[h]],n)}if(s)return this;if(!l)for(;this._pending;)this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,u.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var n in this.attributes)t[n]=void 0;return this.set(t,u.extend({},e,{unset:!0}))},hasChanged:function(e){return null==e?!u.isEmpty(this.changed):u.has(this.changed,e)},changedAttributes:function(e){if(!e)return!!this.hasChanged()&&u.clone(this.changed);var t,n=!1,i=this._changing?this._previousAttributes:this.attributes;for(var r in e)u.isEqual(i[r],t=e[r])||((n||(n={}))[r]=t);return n},previous:function(e){return null!=e&&this._previousAttributes?this._previousAttributes[e]:null},previousAttributes:function(){return u.clone(this._previousAttributes)},fetch:function(e){void 0===(e=e?u.clone(e):{}).parse&&(e.parse=!0);var t=e.success;return e.success=function(e,n,i){if(!e.set(e.parse(n,i),i))return!1;t&&t(e,n,i)},this.sync("read",this,e)},save:function(e,t,n){var i,r,a,o,l=this.attributes;return null==e||"object"==typeof e?(i=e,n=t):(i={})[e]=t,!!(!i||n&&n.wait||this.set(i,n))&&(n=u.extend({validate:!0},n),!!this._validate(i,n)&&(i&&n.wait&&(this.attributes=u.extend({},l,i)),void 0===n.parse&&(n.parse=!0),r=n.success,n.success=function(e,t,n){e.attributes=l;var a=e.parse(t,n);if(n.wait&&(a=u.extend(i||{},a)),u.isObject(a)&&!e.set(a,n))return!1;r&&r(e,t,n)},"patch"===(a=this.isNew()?"create":n.patch?"patch":"update")&&(n.attrs=i),o=this.sync(a,this,n),i&&n.wait&&(this.attributes=l),o))},destroy:function(e){e=e?u.clone(e):{};var t=this,n=e.success,i=function(){t.trigger("destroy",t,t.collection,e)};if(e.success=function(e,t,r){(r.wait||e.isNew())&&i(),n&&n(e,t,r)},this.isNew())return e.success(this,null,e),!1;var r=this.sync("delete",this,e);return e.wait||i(),r},url:function(){var e=u.result(this,"urlRoot")||u.result(this.collection,"url")||P();return this.isNew()?e:e+("/"===e.charAt(e.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},isValid:function(e){return!this.validate||!this.validate(this.attributes,e)},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=u.extend({},this.attributes,e);var n=this.validationError=this.validate(e,t)||null;return!n||(this.trigger("invalid",this,n,t||{}),!1)}});var m=i.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),void 0!==t.comparator&&(this.comparator=t.comparator),this.models=[],this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,u.extend({silent:!0},t))};u.extend(m.prototype,p,{model:v,initialize:function(){},toJSON:function(e){return this.map((function(t){return t.toJSON(e)}))},sync:function(){return i.sync.apply(this,arguments)},add:function(e,t){var n,i,r,a,o,s,d,h,f,p;for(e=u.isArray(e)?e.slice():[e],t||(t={}),d=[],h=t.at,f=this.comparator&&null==h&&0!=t.sort,p=u.isString(this.comparator)?this.comparator:null,n=0,i=e.length;n<i;n++)(r=this._prepareModel(a=e[n],t))?(o=this.get(r))?t.merge&&(o.set(a===r?r.attributes:a,t),f&&!s&&o.hasChanged(p)&&(s=!0)):(d.push(r),r.on("all",this._onModelEvent,this),this._byId[r.cid]=r,null!=r.id&&(this._byId[r.id]=r)):this.trigger("invalid",this,a,t);if(d.length&&(f&&(s=!0),this.length+=d.length,null!=h?c.apply(this.models,[h,0].concat(d)):l.apply(this.models,d)),s&&this.sort({silent:!0}),t.silent)return this;for(n=0,i=d.length;n<i;n++)(r=d[n]).trigger("add",r,this,t);return s&&this.trigger("sort",this,t),this},remove:function(e,t){var n,i,r,a;for(t||(t={}),n=0,i=(e=u.isArray(e)?e.slice():[e]).length;n<i;n++)(a=this.get(e[n]))&&(delete this._byId[a.id],delete this._byId[a.cid],r=this.indexOf(a),this.models.splice(r,1),this.length--,t.silent||(t.index=r,a.trigger("remove",a,this,t)),this._removeReference(a));return this},push:function(e,t){return e=this._prepareModel(e,t),this.add(e,u.extend({at:this.length},t)),e},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return e=this._prepareModel(e,t),this.add(e,u.extend({at:0},t)),e},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(e,t){return this.models.slice(e,t)},get:function(e){if(null!=e)return this._idAttr||(this._idAttr=this.model.prototype.idAttribute),this._byId[e.id||e.cid||e[this._idAttr]||e]},at:function(e){return this.models[e]},where:function(e){return u.isEmpty(e)?[]:this.filter((function(t){for(var n in e)if(e[n]!==t.get(n))return!1;return!0}))},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),u.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(u.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},pluck:function(e){return u.invoke(this.models,"get",e)},update:function(e,t){var n,i,r,a;(t=u.extend({add:!0,merge:!0,remove:!0},t)).parse&&(e=this.parse(e,t));var o=[],l=[],s={};if(u.isArray(e)||(e=e?[e]:[]),t.add&&!t.remove)return this.add(e,t);for(i=0,r=e.length;i<r;i++)n=e[i],a=this.get(n),t.remove&&a&&(s[a.cid]=!0),(t.add&&!a||t.merge&&a)&&o.push(n);if(t.remove)for(i=0,r=this.models.length;i<r;i++)s[(n=this.models[i]).cid]||l.push(n);return l.length&&this.remove(l,t),o.length&&this.add(o,t),this},reset:function(e,t){t||(t={}),t.parse&&(e=this.parse(e,t));for(var n=0,i=this.models.length;n<i;n++)this._removeReference(this.models[n]);return t.previousModels=this.models.slice(),this._reset(),e&&this.add(e,u.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),this},fetch:function(e){void 0===(e=e?u.clone(e):{}).parse&&(e.parse=!0);var t=e.success;return e.success=function(e,n,i){e[i.update?"update":"reset"](n,i),t&&t(e,n,i)},this.sync("read",this,e)},create:function(e,t){if(t=t?u.clone(t):{},!(e=this._prepareModel(e,t)))return!1;t.wait||this.add(e,t);var n=this,i=t.success;return t.success=function(e,t,r){r.wait&&n.add(e,r),i&&i(e,t,r)},e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models.length=0,this._byId={}},_prepareModel:function(e,t){if(e instanceof v)return e.collection||(e.collection=this),e;t||(t={}),t.collection=this;var n=new this.model(e,t);return!!n._validate(e,t)&&n},_removeReference:function(e){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,i){("add"!==e&&"remove"!==e||n===this)&&("destroy"===e&&this.remove(t,i),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],null!=t.id&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments))},sortedIndex:function(e,t,n){t||(t=this.comparator);var i=u.isFunction(t)?t:function(e){return e.get(t)};return u.sortedIndex(this.models,e,i,n)}});u.each(["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","indexOf","shuffle","lastIndexOf","isEmpty","chain"],(function(e){m.prototype[e]=function(){var t=s.call(arguments);return t.unshift(this.models),u[e].apply(u,t)}}));u.each(["groupBy","countBy","sortBy"],(function(e){m.prototype[e]=function(t,n){var i=u.isFunction(t)?t:function(e){return e.get(t)};return u[e](this.models,i,n)}}));var g=i.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},_=/\((.*?)\)/g,w=/(\(\?)?:\w+/g,y=/\*\w+/g,b=/[\-{}\[\]+?.,\\\^$|#\s]/g;u.extend(g.prototype,p,{initialize:function(){},route:function(e,t,n){return u.isRegExp(e)||(e=this._routeToRegExp(e)),n||(n=this[t]),i.history.route(e,u.bind((function(r){var a=this._extractParameters(e,r);n&&n.apply(this,a),this.trigger.apply(this,["route:"+t].concat(a)),this.trigger("route",t,a),i.history.trigger("route",this,t,a)}),this)),this},navigate:function(e,t){return i.history.navigate(e,t),this},_bindRoutes:function(){if(this.routes)for(var e,t=u.keys(this.routes);null!=(e=t.pop());)this.route(e,this.routes[e])},_routeToRegExp:function(e){return e=e.replace(b,"\\$&").replace(_,"(?:$1)?").replace(w,(function(e,t){return t?e:"([^/]+)"})).replace(y,"(.*?)"),new RegExp("^"+e+"$")},_extractParameters:function(e,t){return e.exec(t).slice(1)}});var x=i.History=function(){this.handlers=[],u.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},$=/^[#\/]|\s+$/g,k=/^\/+|\/+$/g,S=/msie [\w.]+/,A=/\/$/;x.started=!1,u.extend(x.prototype,p,{interval:50,getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(null==e)if(this._hasPushState||!this._wantsHashChange||t){e=this.location.pathname;var n=this.root.replace(A,"");e.indexOf(n)||(e=e.substr(n.length))}else e=this.getHash();return e.replace($,"")},start:function(e){if(x.started)throw new Error("Backbone.history has already been started");x.started=!0,this.options=u.extend({},{root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=!1!==this.options.hashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var t=this.getFragment(),n=document.documentMode,r=S.exec(navigator.userAgent.toLowerCase())&&(!n||n<=7);this.root=("/"+this.root+"/").replace(k,"/"),r&&this._wantsHashChange&&(this.iframe=i.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(t)),this._hasPushState?i.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!r?i.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=t;var a=this.location,o=a.pathname.replace(/[^\/]$/,"$&/")===this.root;return this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!o?(this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0):(this._wantsPushState&&this._hasPushState&&o&&a.hash&&(this.fragment=this.getHash().replace($,""),this.history.replaceState({},document.title,this.root+this.fragment+a.search)),this.options.silent?void 0:this.loadUrl())},stop:function(){i.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),x.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();if(t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe))),t===this.fragment)return!1;this.iframe&&this.navigate(t),this.loadUrl()||this.loadUrl(this.getHash())},loadUrl:function(e){var t=this.fragment=this.getFragment(e);return u.any(this.handlers,(function(e){if(e.route.test(t))return e.callback(t),!0}))},navigate:function(e,t){if(!x.started)return!1;if(t&&!0!==t||(t={trigger:t}),e=this.getFragment(e||""),this.fragment!==e){this.fragment=e;var n=this.root+e;if(this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}t.trigger&&this.loadUrl(e)}},_updateHash:function(e,t,n){if(n){var i=e.href.replace(/(javascript:|#).*$/,"");e.replace(i+"#"+t)}else e.hash="#"+t}}),i.history=new x;var E=i.View=function(e){this.cid=u.uniqueId("view"),this._configure(e||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},T=/^(\S+)\s*(.*)$/,C=["model","collection","el","id","attributes","className","tagName","events"];u.extend(E.prototype,p,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(e,t){return this.$el&&this.undelegateEvents(),this.$el=e instanceof i.$?e:i.$(e),this.el=this.$el[0],!1!==t&&this.delegateEvents(),this},delegateEvents:function(e){if(e||(e=u.result(this,"events")))for(var t in this.undelegateEvents(),e){var n=e[t];if(u.isFunction(n)||(n=this[e[t]]),!n)throw new Error('Method "'+e[t]+'" does not exist');var i=t.match(T),r=i[1],a=i[2];n=u.bind(n,this),r+=".delegateEvents"+this.cid,""===a?this.$el.on(r,n):this.$el.on(r,a,n)}},undelegateEvents:function(){this.$el.off(".delegateEvents"+this.cid)},_configure:function(e){this.options&&(e=u.extend({},u.result(this,"options"),e)),u.extend(this,u.pick(e,C)),this.options=e},_ensureElement:function(){if(this.el)this.setElement(u.result(this,"el"),!1);else{var e=u.extend({},u.result(this,"attributes"));this.id&&(e.id=u.result(this,"id")),this.className&&(e.class=u.result(this,"className"));var t=i.$("<"+u.result(this,"tagName")+">").attr(e);this.setElement(t,!1)}}});var j={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};i.sync=function(e,t,n){var r=j[e];u.defaults(n||(n={}),{emulateHTTP:i.emulateHTTP,emulateJSON:i.emulateJSON});var a={type:r,dataType:"json"};if(n.url||(a.url=u.result(t,"url")||P()),null!=n.data||!t||"create"!==e&&"update"!==e&&"patch"!==e||(a.contentType="application/json",a.data=JSON.stringify(n.attrs||t.toJSON(n))),n.emulateJSON&&(a.contentType="application/x-www-form-urlencoded",a.data=a.data?{model:a.data}:{}),n.emulateHTTP&&("PUT"===r||"DELETE"===r||"PATCH"===r)){a.type="POST",n.emulateJSON&&(a.data._method=r);var o=n.beforeSend;n.beforeSend=function(e){if(e.setRequestHeader("X-HTTP-Method-Override",r),o)return o.apply(this,arguments)}}"GET"===a.type||n.emulateJSON||(a.processData=!1);var l=n.success;n.success=function(e){l&&l(t,e,n),t.trigger("sync",t,e,n)};var s=n.error;n.error=function(e){s&&s(t,e,n),t.trigger("error",t,e,n)};var c=n.xhr=i.ajax(u.extend(a,n));return t.trigger("request",t,c,n),c},i.ajax=function(){return i.$.ajax.apply(i.$,arguments)};v.extend=m.extend=g.extend=E.extend=x.extend=function(e,t){var n,i=this;n=e&&u.has(e,"constructor")?e.constructor:function(){return i.apply(this,arguments)},u.extend(n,i,t);var r=function(){this.constructor=n};return r.prototype=i.prototype,n.prototype=new r,e&&u.extend(n.prototype,e),n.__super__=i.prototype,n};var P=function(){throw new Error('A "url" property or function must be specified')}}).call(this)},1982:function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}},1983:function(e,t,n){var i,r;i=[n(11),n(78),n(158),n(213),n(98),n(8),n(65),n(101),n(801),n(54)],void 0===(r=function(a,o,l,s,c,u,d,h,f,p){"use strict";var v,m,g=n(0);a=g(a),o=g(o),l=g(l),v=n(775),m={get passiveFalse(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("testPassive",null,t),window.removeEventListener("testPassive",null,t)}catch(e){}var n=!!e&&{passive:!1};return Object.defineProperty(this,"passiveFalse",{value:n}),n},touchInCanvas:function(e){return!!$(e).closest(".canvas-area").length},getValueByType:function(e,t){switch(t=t?t.toLowerCase():t){case"number":return Number(e);case"boolean":return"false"!=e&&("true"==e||Boolean(e));case"numberboolean":return"false"==e?0:"true"==e||e?1:0;case"string":return String(e);case"object":return window._g.object.jsonparse(e);default:return e}},bindListAction:function(e){var t,n,i,r,a={containment:null,listClass:".c-list",callback:null};if(!(e=e?$.extend(!0,{},a,e):a).containment)return!1;if(!e.containment.hasClass(e.listClass)&&!(0,o.default)(t=e.containment).call(t,e.listClass).length)return!1;var l=e.containment.hasClass(e.listClass)?e.containment.data():(0,o.default)(n=e.containment).call(n,e.listClass).first().data();(0,o.default)(i=e.containment).call(i,".c-list-add").on("click",(function(t){if(e.callback){var n=_g.util.serializeValue({containment:e.containment});e.callback("add",l.target,n,t.currentTarget)}return!1})),(0,o.default)(r=e.containment).call(r,".c-list-remove").on("click",(function(t){return e.callback&&e.callback("remove",l.target,t.currentTarget),!1}))},bindFormChange:function(e){var t,n,i,r={containment:null,$item:null,callback:null,silentDisplay:!1};if(!(e=e?$.extend(!0,{},r,e):r).containment)return!1;(0,o.default)(t=$(e.containment)).call(t,".slider").each((function(){var t,n=(0,o.default)(t=$(this)).call(t,"input"),i=n.data();if(i.target){var r,a=(0,o.default)(r=$(e.containment)).call(r,'[name="'+i.target+'"]');a.on("change",(function(){n.slider("getValue")!=Number($(this).val())&&n.slider("setValue",Number($(this).val()))})),n.on("slide",(function(e){Number(a.val())!=e.value&&(a.closest(".spinner").spinner("value",e.value),a.trigger("change"))}))}})),(0,o.default)(n=$(e.containment)).call(n,"[rel=form]").each((function(){var t,n,i,r=$(this).data();if(null!=r.value)if((0,o.default)(n=$(this)).call(n,"[data-value]").removeClass("active"),r.mutiple||r.multiple)for(var a=r.value.split(","),l=0;l<a.length;l++){var s;(0,o.default)(s=$(this)).call(s,'[data-value="'+a[l]+'"]').addClass("active")}else(0,o.default)(i=$(this)).call(i,'[data-value="'+r.value+'"]').addClass("active");var c=$(this);(0,o.default)(t=$(this)).call(t,"[data-value]").on("click",(function(){var t=!1,n=$(this).data("value");if(r.silentdisplay||(0,o.default)(c).call(c,"[data-show]").text($(this).text()||n),r.multiple||r.mutiple){$(this).hasClass("active")?$(this).removeClass("active"):r.silentdisplay||$(this).addClass("active");var i=[];(0,o.default)(c).call(c,"[data-value]").each((function(){var e=$(this).data("value");$(this).hasClass("active")&&i.push(_g.util.getValueByType(e,r.type))})),i=i.join(","),c.data("value",i),r.value=i,t=!0}else $(this).hasClass("active")||(n=_g.util.getValueByType(n,r.type),c.data("value",n),$(this).addClass("active"),$(this).siblings().length?$(this).siblings().removeClass("active"):$(this).parent().siblings().children().removeClass("active"),r.value=n,t=!0);e.callback&&t&&e.callback(c,e,r)}))}));var a=e.$item?e.$item:"input,textarea,select";(0,o.default)(i=$(e.containment)).call(i,a).on("change",(function(){var t=$(this).data();t.name=$(this).attr("name")||$(this).attr("id"),e.callback&&e.callback($(this),e,t)})),e.createIndex&&_g.util.createFormIndex({containment:e.containment})},serializeValue:function(e){var t,n,i,r,l,s={containment:null,typeAttr:"data-type",attrAttr:"data-attr",allowEmpty:!0};if(!(e=e?$.extend({},s,e):s).containment)return!1;var c=e.containment,u={},d=function(t,n){if("disabled"!=t.attr("disabled")){var i=t.attr("name")||t.attr("id"),r=(t.attr(e.typeAttr),t.attr(e.attrAttr));i&&(r?("object"!=(0,a.default)(u[r])&&(u[r]={}),u[r][i]=n):u[i]=n)}};return(0,o.default)(t=$(c)).call(t,'input[type="text"],input[type="email"],input[type="tel"],input[type="hidden"],textarea').each((function(){$(this).attr("name")||$(this).attr("id");var t=$(this).attr(e.typeAttr),n=($(this).attr(e.attrAttr),_g.util.getValueByType($(this).val(),t));d($(this),n)})),(0,o.default)(n=$(c)).call(n,'input[type="checkbox"]').each((function(){var t=$(this).attr("name")||$(this).attr("id"),n=$(this).attr(e.typeAttr),i=$(this).attr(e.attrAttr);i&&"object"!=(0,a.default)(u[i])&&(u[i]={});var r=i?u[i][t]?u[i][t]:[]:u[t]?u[t]:[];"checked"==$(this).attr("checked")?"boolean"==n||"numberboolean"==n?r=_g.util.getValueByType(!$(this).attr("data-reverse"),n):r.push(_g.util.getValueByType($(this).val(),n)):"boolean"!=n&&"numberboolean"!=n||(r=_g.util.getValueByType(!!$(this).attr("data-reverse"),n)),d($(this),r)})),(0,o.default)(i=$(c)).call(i,'input[type="radio"]:checked').each((function(){$(this).attr("name")||$(this).attr("id");var t=$(this).attr(e.typeAttr),n=($(this).attr(e.attrAttr),_g.util.getValueByType($(this).val(),t));d($(this),n)})),(0,o.default)(r=$(c)).call(r,"select").each((function(){var t,n=$(this).attr("name")||$(this).attr("id"),i=$(this).attr(e.typeAttr),r=$(this).attr(e.attrAttr);Boolean($(this).attr("data-mutiple"))?(r&&"object"!=(0,a.default)(u[r])&&(u[r]={}),(t=r?u[r][n]?u[r][n]:[]:u[n]?u[n]:[]).push($(this).val())):t=_g.util.getValueByType($(this).val(),i),d($(this),t)})),(0,o.default)(l=$(c)).call(l,"[rel=form]").each((function(){var e=$(this).data();if(e.mutiple||e.multiple)if(null!=e.value)var t=e.value;else t="";else t=_g.util.getValueByType(e.value,e.type);!function(e,t){if("disabled"!=e.attr("disabled")){var n=e.data(),i=n.name,r=(n.type,n.attr);i&&(r?("object"!=(0,a.default)(u[r])&&(u[r]={}),u[r][i]=t):u[i]=t)}}($(this),t)})),u},createFormIndex:function(e){var t={containment:null,typeAttr:"data-type",attrAttr:"data-attr"};if(!(e=e?$.extend({},t,e):t).containment)return!1;var n=e.containment;if(!$(n).data().formindex&&!e.force){var i,r,a,l,s,c={};(0,o.default)(i=$(n)).call(i,"input,textarea,select").each((function(){var t=$(this).attr("name")||$(this).attr("id"),n=$(this).attr(e.typeAttr);!function(e,t,n,i,r){t&&(e?(c[e]||(c[e]={}),c[e][t]?"radio"==r||"checkbox"==r&&"boolean"!=i?c[e][t].els.push(n):c[e][t].el=n:c[e][t]={el:n,els:[n],type:i,tag:n[0].tagName,_type:n[0].type}):c[t]?"radio"==r||"checkbox"==r&&"boolean"!=i?c[t].els.push(n):c[t].el=n:c[t]={el:n,els:[n],type:i,tag:n[0].tagName,_type:n[0].type})}($(this).attr(e.attrAttr),t,$(this),n,this.type)})),(0,o.default)(r=$(n)).call(r,"[rel=form]").each((function(){var e,t,n,i,r,a=$(this).data();e=a.attr,t=a.name,n=$(this),i=a.type,r=a.multiple||a.mutiple,t&&(e?(c[e]||(c[e]={}),c[e][t]?c[e][t].el=n:c[e][t]={el:n,els:[n],type:i,tag:n[0].tagName,_type:n[0].type,rel:!0,multiple:r}):c[t]?c[t].el=n:c[t]={el:n,els:[n],type:i,tag:n[0].tagName,_type:n[0].type,rel:!0,multiple:r})})),(0,o.default)(a=$(n)).call(a,".slider").each((function(){var t,n=(0,o.default)(t=$(this)).call(t,"input").data();if(n.target){var i,r,a=n.target;!function(e,t,n){t&&(e?(c[e]||(c[e]={}),c[e][t]?c[e][t].slider=n:c[e][t]={slider:n}):c[t]?c[t].slider=n:c[t]={slider:n})}((0,o.default)(i=$(e.containment)).call(i,'[name="'+n.target+'"]').attr("data-attr"),a,(0,o.default)(r=$(this)).call(r,"input"))}})),(0,o.default)(l=$(n)).call(l,".c_color_el").each((function(){var e,t,n,i=$(this).data();if(i.colorpicker){var r,a=(0,o.default)(r=$(this)).call(r,"input");e=a.attr("data-attr"),t=a.attr("name"),n=i.colorpicker,t&&(e?(c[e]||(c[e]={}),c[e][t]?c[e][t].colorpicker=n:c[e][t]={colorpicker:n}):c[t]?c[t].colorpicker=n:c[t]={colorpicker:n})}})),(0,o.default)(s=$(n)).call(s,".spinner").each((function(){var e,t,n,i=$(this).data();if(i.spinner){var r,a=(0,o.default)(r=$(this)).call(r,"input");e=a.attr("data-attr"),t=a.attr("name"),n=i.spinner,t&&(e?(c[e]||(c[e]={}),c[e][t]?c[e][t].spinner=n:c[e][t]={spinner:n}):c[t]?c[t].spinner=n:c[t]={spinner:n})}})),$(n).data("formindex",c)}return c},renderFormInfo:function(e){if(!e.containment)return!1;var t=$(e.containment).data().formindex;if(t){(0,l.default)(e)||(e.keys=["value"]);for(var n=0;n<(0,l.default)(e).length;n++)v.each(e[(0,l.default)(e)[n]],(function(i,r){"value"==(0,l.default)(e)[n]?v.isObject(i)?t[r]&&v.each(i,(function(e,n){t[r][n]&&(_g.util.setFormItemValue(t[r][n],e),t[r][n].slider&&t[r][n].slider.slider("setValue",e))})):t[r]&&(_g.util.setFormItemValue(t[r],i),t[r].slider&&t[r].slider.slider("setValue",i)):"name"==(0,l.default)(e)[n]&&(v.isObject(i)?t[r]&&v.each(i,(function(e,n){t[r][n]&&_g.util.setFormItemName(t[r][n],e)})):t[r]&&_g.util.setFormItemName(t[r],i))}))}},setFormItemValue:function(e,t){if(e||(e={}),e.colorpicker)e.colorpicker.setValue(t,{silent:!0});else if(e.spinner)e.spinner.value(t);else if(e.rel){if(e.multiple){var n;(0,o.default)(n=e.el).call(n,"[data-value]").removeClass("active");for(var i=0;i<t.length;i++){var r;(0,o.default)(r=e.el).call(r,'[data-value="'+t[i]+'"]').addClass("active")}}else{var a,l,s;(0,o.default)(a=e.el).call(a,'[data-value="'+t+'"]').addClass("active").siblings().removeClass("active"),(0,o.default)(l=e.el).call(l,"[data-show]").html((0,o.default)(s=e.el).call(s,'[data-value="'+t+'"]').html())}e.el.data("value",t)}else if("number"==e.type&&(t=Number(t)),"INPUT"==e.tag)if("checkbox"==e._type)if("boolean"==e.type)t?e.el.attr("checked","checked"):e.el.removeAttr("checked");else for(i=0;i<e.els.length;i++)v.include(t,"number"==e.type?Number(e.els[i].val()):e.els[i].val())?e.els[i].attr("checked","checked"):e.els[i].removeAttr("checked");else if("radio"==e._type)if("boolean"==e.type)t?e.el.attr("checked","checked"):e.el.removeAttr("checked");else for(i=0;i<e.els.length;i++)t==("number"==e.type?Number(e.els[i].val()):e.els[i].val())?e.els[i].attr("checked","checked"):e.els[i].removeAttr("checked");else e.el.val(t);else"TEXTAREA"==e.tagName?e.el.html(t):e.el.val(t)},setFormItemName:function(e,t){if(e||(e={}),e.els.length>1)for(var n=0;n<e.els.length;n++)e.els[n].attr("name",t);else{if(e.rel)return e.el.attr("data-name",t),void e.el.data("name",t);e.el.attr("name",t)}},disableLink:function(e){var t={containment:null,linkitem:"a",enabled:!0},n=e.linkitem||t.linkitem;return(e=e?$.extend(!0,{},t,e):t).linkitem=n,!!e.containment&&(e.func=function(){return!1},e.enable=function(){var t;(0,o.default)(t=$(e.containment)).call(t,e.linkitem).each((function(){$(this).on("click",e.func),e.enabled=!0}))},e.disable=function(){var t;(0,o.default)(t=$(e.containment)).call(t,e.linkitem).each((function(){$(this).off("click",e.func),e.enabled=!1}))},e.enable(),e)},domExist:function(e,t){return t||(t=document),"string"==typeof e&&(e=$(e)),$.contains(t.documentElement,e[0])},getImageSizeBySrc:function(e,t,n){var i=new Image;i.onload=function(){if(n&&(this.width>n||this.height>n)){var e=this.width/this.height;e>1?(this.width=n,this.height=this.width/e):(this.height=n,this.width=this.height*e)}t&&t(this.width,this.height)},i.src=e},htmlspecialchars:function(e){return"string"!=typeof e?e:function(e,t,n){for(var i=e.length,r=0;r<i;r++){var a=new RegExp(e[r],"ig");n=n.replace(a,"string"==typeof t?t:t[r]?t[r]:t[0])}return n}(["&","<",">",'"',"&lt;br&gt;"],["&amp;","&lt;","&gt;","&quot;","<br>"],e)},toggleActive:function(e){$(e).css("-moz-transition","all 0.5s").css("-webkit-transition","all 0.5s").css("-ms-transition","all 0.5s").css("-o-transition","all 0.5s").css("transition","all 0.5s"),$(e).css("opacity","0.5").css("background-color","#f80"),setTimeout((function(){$(e).css("opacity","1").css("background-color","#fff")}),500)}},i=[n(759),n(807)],void 0===(r=function(){return window._g.util=m,m=void 0,window._g.util}.apply(t,i))||(e.exports=r)}.apply(t,i))||(e.exports=r)},1984:function(e,t,n){var i=n(1985);e.exports=i},1985:function(e,t,n){n(371);var i=n(74);e.exports=i.f("asyncIterator")},1986:function(e,t,n){var i;void 0===(i=function(){"use strict";n(861),n(1388),n(1389);var t=n(861).extend({model:n(1388)});e.exports=t}.apply(t,[]))||(e.exports=i)},1989:function(e,t,n){var i,r;i=[t,n(801)],void 0===(r=function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.checkShareLink=void 0;e.checkShareLink=function(e){var t=n(e)?"生成的base64格式图片内容无法直接分享，请检查相关设置进行修改后再试。":null,r=i(e)?"分享内容过长，请检查相关设置进行修改后再试。":null;return t||r||null};var n=function(e){return new RegExp("data:\\w+/\\w+;base64").test(e)},i=function(e){return!!e&&e.length>4e3}}.apply(t,i))||(e.exports=r)},1992:function(e,t,n){var i=n(227),r=n(214);e.exports=function(e,t){var n=null==e?null:void 0!==i&&r(e)||e["@@iterator"];if(null!=n){var a,o,l=[],s=!0,c=!1;try{for(n=n.call(e);!(s=(a=n.next()).done)&&(l.push(a.value),!t||l.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{s||null==n.return||n.return()}finally{if(c)throw o}}return l}},e.exports.default=e.exports,e.exports.__esModule=!0},775:function(e,t,n){(function(t){e.exports=t._=n(1980)}).call(this,n(30))},777:function(e,t,n){var i,r;i=[t,n(11),n(219),n(215),n(63),n(155),n(153),n(96),n(97),n(345),n(214),n(3),n(1374),n(349)],void 0===(r=function(e,t,i,r,a,o,l,s,c,u,d,h,f,p){"use strict";var v=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.__extends=function(e,t){function n(){this.constructor=e}m(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},e.__rest=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(0,a.default)(t).call(t,i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof o.default){var r=0;for(i=(0,o.default)(e);r<i.length;r++)(0,a.default)(t).call(t,i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n},e.__decorate=function(e,n,i,r){var a,o=arguments.length,s=o<3?n:null===r?r=(0,l.default)(n,i):r;if("object"===("undefined"==typeof Reflect?"undefined":(0,t.default)(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,n,i,r);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(s=(o<3?a(s):o>3?a(n,i,s):a(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},e.__param=function(e,t){return function(n,i){t(n,i,e)}},e.__metadata=function(e,n){if("object"===("undefined"==typeof Reflect?"undefined":(0,t.default)(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,n)},e.__awaiter=function(e,t,n,i){return new(n||(n=s.default))((function(r,a){function o(e){try{s(i.next(e))}catch(e){a(e)}}function l(e){try{s(i.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,l)}s((i=i.apply(e,t||[])).next())}))},e.__generator=function(e,t){var n,i,r,a,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof c.default&&(a[u.default]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,i&&(r=2&a[0]?i.return:a[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,a[1])).done)return r;switch(i=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,i=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(r=o.trys,(r=r.length>0&&r[r.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){o.label=a[1];break}if(6===a[0]&&o.label<r[1]){o.label=r[1],r=a;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(a);break}r[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],i=0}finally{n=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},e.__exportStar=function(e,t){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])},e.__values=_,e.__read=w,e.__spread=function(){for(var e=[],t=0;t<arguments.length;t++)e=(0,h.default)(e).call(e,w(arguments[t]));return e},e.__spreadArrays=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var i=Array(e),r=0;for(t=0;t<n;t++)for(var a=arguments[t],o=0,l=a.length;o<l;o++,r++)i[r]=a[o];return i},e.__await=y,e.__asyncGenerator=function(e,t,n){if(!f.default)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=n.apply(e,t||[]),a=[];return i={},o("next"),o("throw"),o("return"),i[f.default]=function(){return this},i;function o(e){r[e]&&(i[e]=function(t){return new s.default((function(n,i){a.push([e,t,n,i])>1||l(e,t)}))})}function l(e,t){try{(n=r[e](t)).value instanceof y?s.default.resolve(n.value.v).then(c,u):d(a[0][2],n)}catch(e){d(a[0][3],e)}var n}function c(e){l("next",e)}function u(e){l("throw",e)}function d(e,t){e(t),a.shift(),a.length&&l(a[0][0],a[0][1])}},e.__asyncDelegator=function(e){var t,n;return t={},i("next"),i("throw",(function(e){throw e})),i("return"),t[u.default]=function(){return this},t;function i(i,r){t[i]=e[i]?function(t){return(n=!n)?{value:y(e[i](t)),done:"return"===i}:r?r(t):t}:r}},e.__asyncValues=function(e){if(!f.default)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[f.default];return n?n.call(e):(e=_(e),t={},i("next"),i("throw"),i("return"),t[f.default]=function(){return this},t);function i(n){t[n]=e[n]&&function(t){return new s.default((function(i,r){(function(e,t,n,i){s.default.resolve(i).then((function(t){e({value:t,done:n})}),t)})(i,r,(t=e[n](t)).done,t.value)}))}}},e.__makeTemplateObject=function(e,t){Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t;return e},e.__importStar=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t},e.__importDefault=function(e){return e&&e.__esModule?e:{default:e}},e.__classPrivateFieldGet=function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)},e.__classPrivateFieldSet=function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},e.__assign=void 0,t=v(t),i=v(i),r=v(r),a=v(a),o=v(o),l=v(l),s=v(s),c=v(c),u=v(u),d=v(d),h=v(h),f=v(f),p=v(p);var m=function(e,t){return(m=i.default||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};var g=function(){return e.__assign=g=r.default||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},g.apply(this,arguments)};function _(e){var t="function"==typeof c.default&&u.default,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function w(e,t){var n="function"==typeof c.default&&(0,d.default)(e);if(!n)return e;var i,r,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(i=a.next()).done;)o.push(i.value)}catch(e){r={error:e}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return o}function y(e){return this instanceof y?(this.v=e,this):new y(e)}e.__assign=g}.apply(t,i))||(e.exports=r)},797:function(e,t,n){var i=n(1392),r=n(1992),a=n(366),o=n(1393);e.exports=function(e,t){return i(e)||r(e,t)||a(e,t)||o()},e.exports.default=e.exports,e.exports.__esModule=!0},801:function(e,t,n){var i=n(31),r=n(390),a=n(56).f,o=n(161).f,l=n(233),s=n(169),c=i.RegExp,u=c,d=c.prototype,h=/a/g,f=/a/g,p=new c(h)!==h;if(n(41)&&(!p||n(38)((function(){return f[n(21)("match")]=!1,c(h)!=h||c(f)==f||"/a/i"!=c(h,"i")})))){c=function(e,t){var n=this instanceof c,i=l(e),a=void 0===t;return!n&&i&&e.constructor===c&&a?e:r(p?new u(i&&!a?e.source:e,t):u((i=e instanceof c)?e.source:e,i&&a?s.call(e):t),n?this:d,c)};for(var v=function(e){e in c||a(c,e,{configurable:!0,get:function(){return u[e]},set:function(t){u[e]=t}})},m=o(u),g=0;m.length>g;)v(m[g++]);d.constructor=c,c.prototype=d,n(58)(i,"RegExp",c)}n(362)("RegExp")},807:function(e,t,n){(function(i){var r,a;r=[n(11),n(8),n(10),n(98),n(54),n(801),n(898),n(125),n(213),n(78),n(63),n(51),n(99),n(14),n(158),n(344),n(350),n(4),n(126),n(215),n(153)],void 0===(a=function(o,l,s,c,u,d,h,f,p,v,m,g,_,w,y,b,x,k,S,A,E){"use strict";var T,C,j,P=n(0);o=P(o),v=P(v),m=P(m),g=P(g),_=P(_),w=P(w),y=P(y),b=P(b),x=P(x),k=P(k),S=P(S),A=P(A),E=P(E),j=n(775),(T=C={message:function(e,t,n){var i,r=['  \t\t\t<div class="status '+e+'">',"   \t\t\t <p>"+t+"</p>",'   \t\t<a href="#" class="close">Close</a></div>'].join("");0==(0,v.default)(i=$("body")).call(i,".msg").length&&$("body").append('<div class="msg"></div>'),n||(n=3e3),$(".msg").html(r),$(".msg").show(),setTimeout((function(){$(".msg").fadeOut("slow")}),n)},uuid:function(e){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}if(e){for(var n="";e--;)n+=t();return n}return t()+t()+t()+t()+t()+t()+t()+t()},changeURLPar:function(e,t,n){decodeURI(n)==n&&(n=encodeURI(n));var i,r=e.split("#")[0];if(-1!=(0,m.default)(r).call(r,"?")){var a="";a=r.substr((0,m.default)(r).call(r,"?")+1);var o,l="",s="",c="0";if(-1!=(0,m.default)(a).call(a,"&")){o=a.split("&");for(var u=0;u<o.length;u++){if(o[u].split("=")[0]==t){if(""==n)continue;s=n,c="1"}else s=o[u].split("=")[1];l=l+o[u].split("=")[0]+"="+s+"&"}l=l.substr(0,l.length-1),"0"==c&&""!=n&&l==a&&(l=l+"&"+t+"="+n)}else-1!=(0,m.default)(a).call(a,"=")?((o=a.split("="))[0]==t?(s=n,c="1"):s=o[1],""!=s&&(l=o[0]+"="+s),"0"==c&&l==a&&""!=n&&(l=l+"&"+t+"="+n)):""!=n&&(l=t+"="+n);i=r.substr(0,(0,m.default)(r).call(r,"?")),""!=l&&(i=i+"?"+l)}else i=""!=n?r+"?"+t+"="+n:r;return(0,m.default)(e).call(e,"#")>0&&(i=i+"#"+e.split("#")[1]),i},getUrlParameterByName:function(e,t){var n=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]"),i=new RegExp("([\\?&]"+n+"=([^&#]*))+").exec(void 0!==t&&t||location.search);return null==i?null:decodeURIComponent(i[i.length-1].replace(/\+/g," "))},replaceUrlParameterByName:function(e,t,n){var i=t.split("=")[1];return this.changeURLPar(n,e,i)},getHashParameterByName:function(e){var t=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]"),n=new RegExp("[\\#&]"+t+"=([^&#]*)").exec(location.hash);return null==n?null:decodeURIComponent(n[1].replace(/\+/g," "))},replaceHashParameterByName:function(e,t){var n=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]"),i=new RegExp("[\\#&]"+n+"=([^&#]*)").exec(location.hash);return location.hash.replace(i[0].substr(1),t)},parseTemplate:function(e){var t=null;return"function"==typeof e&&(t=e),"string"==typeof e&&(t=j.template(e)),t},getHost:function(e){var t="null";void 0!==e&&null!=e||(e=window.location.href);var n=e.match(/.*\:\/\/([^\/]*).*/);return void 0!==n&&null!=n&&(t=n[1]),t},isEpub360Domain:function(e){for(var t=["epub360.com","epub360.com.cn","epub360.cn","creatby.com"],n=window._g.getHost(e),i=!1,r=0;r<t.length;r++)if((0,m.default)(n).call(n,t[r])>0){i=!0;break}return i},renderT:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;if(!e)return!1;var i=$.extend(!0,{},t);if(n){var r={};r[n]=i,i=r}var a=window._g.parseTemplate(e),o=$(a(i));return window._g.generator&&(window._g.generator.autoWidget(o),(o.hasClass("c-slimscroll")||(0,v.default)(o).call(o,".c-slimscroll").length)&&window._g.generator.autoScroll(o)),(0,v.default)(o).call(o,"[data-toggle=tooltip]").each((function(){$(this).tooltip()})),o},domExist:function(e,t){return t||(t=document),"string"==typeof e&&(e=$(e)),$.contains(t.documentElement,e[0])},browserSupport:function(e){var t=!1,n={msie:1,chrome:1,mozilla:1,safari:1,opera:1,success:null,fail:null};e=e?$.extend(!0,{},n,e):$.extend(!0,{},n);var i=(0,g.default)($.browser.version,10);return $.browser.msie&&1==e.msie||$.browser.chrome&&1==e.chrome||$.browser.mozilla&&1==e.mozilla||$.browser.safari&&1==e.safrai&&$.browser.opera&&1==e.opera?t=!0:$.browser.msie&&0==e.msie||$.browser.chrome&&0==e.chrome||$.browser.mozilla&&0==e.mozilla||$.browser.safari&&0==e.safrai&&$.browser.opera&&0==e.opera?t=!1:($.browser.msie&&(t=i>=e.msie),$.browser.chrome&&(t=i>=e.chrome),$.browser.mozilla&&(t=i>=e.mozilla),$.browser.opera&&(t=i>=e.opera),$.browser.safari&&(t=i>=e.safari)),t?e.success&&e.success():e.fail&&e.fail(),t},array:{moveup:function(e,t){var n=(0,m.default)(e).call(e,t);return n>0&&(e=window._g.array.swap(e,n,n-1)),e},movedown:function(e,t){var n=(0,m.default)(e).call(e,t);return n<e.length&&(e=window._g.array.swap(e,n,n+1)),e},swap:function(e,t,n){return e[t]=(0,_.default)(e).call(e,n,1,e[t])[0],e},move2first:function(e,t){var n=[];n.push(t);for(var i=0;i<e.length;i++)e[i]!=t&&n.push(e[i]);return n},move2last:function(e,t){for(var n=[],i=0;i<e.length;i++)e[i]!=t&&n.push(e[i]);return n.push(t),n},randomPick:function(e){return e[Math.floor(Math.random()*e.length)]},maptree:function(e){var t={treesource:null,mapdata:null,idAttribute:"id"};if(!(e=e?$.extend(!0,{},t,e):$.extend(!0,{},t)).treesource||!e.mapdata)return[];var n=[];return j.each(e.treesource,(function(t){t.children&&(t.children=window._g.array.maptree({treesource:t.children,mapdata:e.mapdata,idAttribute:e.idAttribute}));var i=(0,v.default)(j).call(j,e.mapdata,(function(n){return n[e.idAttribute]==t[e.idAttribute]}));i&&(t=$.extend(!0,t,i)),n.push(t)})),n},toDict:function(e,t){for(var n={},i=0;i<e.length;i++)n[e[i][t]]=e[i];return n},treeToList:function(e,t,n){var i={childrenKey:"children",parentKey:"parent",idAttribute:"id"};if(t=t?$.extend(!0,{},i,t):$.extend(!0,{},i),!e)return[];var r=[];return j.each(e,(function(i){if(i[t.childrenKey].length){for(var a=window._g.array.toTreeList(i[t.childrenKey],t,n||e),o=0;o<a.length;o++)r.push(a[o]);i.children=j.pluck(i.children,"id")}else delete i.children;r.push(i)})),r},listToTree:function(e,t,n){var i={childrenKey:"children",parentKey:"parent",idAttribute:"id"};t=t?$.extend(!0,{},i,t):$.extend(!0,{},i);var r=[];return n&&(e=(0,w.default)(j).call(j,e,(function(e){return"string"==typeof e&&(e=(0,v.default)(j).call(j,n,(function(n){return n[t.idAttribute]==e}))),e}))),j.each(e,(function(i){var a=$.extend(!0,{},i);n||a[t.parentKey],a[t.childrenKey]&&a[t.childrenKey].length?(a[t.childrenKey]=window._g.array.listToTree(a[t.childrenKey],t,n||e),r.push(a)):r.push(a)})),r}},object:{jsonparse:function(e){if(!e)return null;try{return JSON.parse(e)}catch(t){return e}},equal:function(e,t){},treeToArray:function(e){},getKeyByValue:function(e,t){try{var n;return(0,y.default)(j).call(j,e)[(0,m.default)(n=(0,b.default)(j).call(j,e)).call(n,t)]}catch(e){return}}},string:{randomGenerate:function(e){e=e||10;for(var t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz1234567890",i=0;i<e;i++)t+=n.charAt(Math.floor(Math.random()*n.length));return t},getUrlExt:function(e){return e.match(/(.[^.]+|)$/)[0]},getUrlNameWithOutExt:function(e){return e.substr(0,(0,x.default)(e).call(e,"."))||e},getFileNameByPath:function(e){return e.replace(/^.*[\\\/]/,"")},string2boolean:function(e){return"true"==e},capitalize:function(e){return e=e.substring(0,1).toUpperCase()+e.substring(1)},rmfirst:function(e){return e.replace(/^.(\s+)?/,"")},rmlast:function(e){return e.replace(/(\s+)?.$/,"")},isPureEng:function(e){var t=e;if(""==t)return!0;for(var n=0;n<t.length;n++)if(!(t.charCodeAt(n)>=48&&t.charCodeAt(n)<=57||t.charCodeAt(n)>=65&&t.charCodeAt(n)<=90||t.charCodeAt(n)>=97&&t.charCodeAt(n)<=122))return!1;return!0},isEng:function(e){var t=e;if(""==t)return!0;for(var n=0;n<t.length;n++)if(!(32==t.charCodeAt(n)||t.charCodeAt(n)>=48&&t.charCodeAt(n)<=57||t.charCodeAt(n)>=65&&t.charCodeAt(n)<=90||t.charCodeAt(n)>=97&&t.charCodeAt(n)<=122))return!1;return!0},isPureChi:function(e){var t=e;if(""==t)return!0;for(var n=0;n<t.length;n++)if(!(t.charCodeAt(n)>=19968&&t.charCodeAt(n)<=64041))return!1;return!0},isChi:function(e){var t=e;if(""==t)return!0;for(var n=0;n<t.length;n++)if(!(32==t.charCodeAt(n)||t.charCodeAt(n)>=19968&&t.charCodeAt(n)<=64041))return!1;return!0},autoName:function(e,t,n,i){e||(e=""),n||(n=""),i||(i=1);var r=e+i+n;return-1!=(0,m.default)(t).call(t,r)?window._g.string.autoName(e,t,n,i+1):r}},boolean:{randomPick:function(){return!!Math.round(1*Math.random())}},number:{random:function(e,t){return void 0===e&&(e=0),void 0===t&&(t=100),Math.random()*(t-e)+e},randomInt:function(e,t){return void 0===e&&(e=0),void 0===t&&(t=100),Math.floor(Math.random()*(t-e+1))+e},round:function(e,t){null==(0,o.default)(t)&&(t=.5);(0,g.default)(e)},rgbToHex:function(e,t,n){var i;return"#"+(0,k.default)(i=((1<<24)+(e<<16)+(t<<8)+n).toString(16)).call(i,1)},hexToRgb:function(e){e=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(e,t,n,i){return t+t+n+n+i+i}));var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:(0,g.default)(t[1],16),g:(0,g.default)(t[2],16),b:(0,g.default)(t[3],16)}:null},decimal:function(e,t){return Number(e.toFixed(t))}},hasTouch:function(){try{return document.createEvent("TouchEvent"),!0}catch(e){return!1}}(),inIframe:function(){try{return window.self!==window.top}catch(e){return!0}},supportFlash:function(){return"undefined"!=typeof swfobject&&0!==swfobject.getFlashPlayerVersion().major},isMSIE11:function(){return!!navigator.userAgent.match(/Trident\/7\./)},getRGBA:function(e,t){if(t=null!=t?Number(t):1,!e)return"transparent";if(-1!=(0,m.default)(e).call(e,"rgb("))var n,i="rgba("+(n=e.replace(/rgb\((.*)\)/,"$1").split(","))[0]+","+n[1]+","+n[2]+","+t+")";else i=(n=window._g.number.hexToRgb(e))?"rgba("+n.r+","+n.g+","+n.b+","+t+")":"rgba(255,255,255,1)";return i},weixinShare:function(){if("undefined"!=typeof wx_permissions&&wx_permissions.onMenuShareTimeline){var e,t=window.message_link+((0,m.default)(e=window.message_link).call(e,"disableHistoryStart=0")>=0?"#page/"+window.interaction_view.currentPage:""),n=window.shareTitle==window.bookTitle?descContent:window.shareTitle;window.wx.onMenuShareAppMessage({title:window.bookTitle,desc:n,link:t,imgUrl:window.imgUrl,trigger:function(e){window._gaq.push(["_trackEvent","weixin","share","appmessage","click"])},success:function(e){window._gaq.push(["_trackSocial","Wechat","appmessage",window.ga_opt_target,window.ga_opt_pagePath])},cancel:function(e){window._gaq.push(["_trackEvent","weixin","share","appmessage","cancel"])},fail:function(e){window._gaq.push(["_trackEvent","error","weixinjsapi","appmessage",(0,S.default)(e)])}}),window.wx.onMenuShareTimeline({title:window.shareTitle,link:t,imgUrl:window.imgUrl,trigger:function(e){window._gaq.push(["_trackEvent","weixin","share","timeline","click"])},success:function(e){window._gaq.push(["_trackSocial","Wechat","timeline",window.ga_opt_target,window.ga_opt_pagePath])},cancel:function(e){window._gaq.push(["_trackEvent","weixin","share","timeline","cancel"])},fail:function(e){window._gaq.push(["_trackEvent","error","weixinjsapi","timeline",(0,S.default)(e)])}}),window.wx.onMenuShareQQ({title:window.bookTitle,desc:n,link:t,imgUrl:window.imgUrl,trigger:function(e){window._gaq.push(["_trackEvent","weixin","share","QQ","click"])},complete:function(e){window._gaq.push(["_trackEvent","weixin","share","QQ","complete"])},success:function(e){window._gaq.push(["_trackSocial","Wechat","QQ",window.ga_opt_target,window.ga_opt_pagePath])},cancel:function(e){window._gaq.push(["_trackEvent","weixin","share","QQ","cancel"])},fail:function(e){window._gaq.push(["_trackEvent","error","weixinjsapi","QQ",(0,S.default)(e)])}}),window.wx.onMenuShareWeibo({title:window.shareTitle,desc:descContent,link:window.message_link,imgUrl:window.imgUrl,trigger:function(e){window._gaq.push(["_trackEvent","weixin","share","Weibo","click"])},complete:function(e){window._gaq.push(["_trackEvent","weixin","share","Weibo","complete"])},success:function(e){window._gaq.push(["_trackSocial","Wechat","Weibo",window.ga_opt_target,window.ga_opt_pagePath])},cancel:function(e){window._gaq.push(["_trackEvent","weixin","share","Weibo","cancel"])},fail:function(e){window._gaq.push(["_trackEvent","error","weixinjsapi","Weibo",(0,S.default)(e)])}})}},get_array:function(e,t){var n=[];return e.each((function(){var e=$(this).attr(t);n.push(e)})),n},get_tree:function(e,t,n,r){var a=[];return t&&e.children(t).children(n).each((function(){var e={};e.id=$(this).attr(r),e.children=i.get_tree($(this),t,n,r),a.push(e)})),a},get_tree_by_checkbox:function(e,t,n,r,a){var o=[];return t&&e.children(t).children(n).each((function(){var e,l=(0,v.default)(e=$(this)).call(e,r).first(),s={};"checked"==l.attr("checked")?s.id=l.attr(a):s.id=null,s.children=i.get_tree_by_checkbox($(this),t,n,r,a),o.push(s)})),o},get_page:function(e,t,n){n||(n=10),e=(0,g.default)(e);for(var i=n/2,r=1,a=t,o=i;o>=0&&!((r=e-o)>0);o--);return{start:r,end:a=(a=e+i)>t?t:a}}}).EventHandler=function(){function e(){this.queue=[]}return e.prototype={add:function(e){this.queue.push(e)},del:function(e){e?this.queue.forEach((function(t,n){var i;t===e&&(0,_.default)(i=this.queue).call(i,n,1)}),this):this.queue=[]},dispatch:function(e,t){this.queue.forEach((function(n){"function"==typeof n&&n.call(t,e)}),this)}},e}(),T.dynamicGetter=function(e,t,n,i){if(void 0===n||!n.shift)throw"TypeError: invalid arguments\n"+n+" is not an array";i=(0,A.default)({keep:!0},i);var r=(0,E.default)(e,t)||{};if(!1!==i.keep){var a=n[n.length-1];r.get=function(){return l(a)},delete r.value,delete r.writable}var o={configurable:!0,get:function(){return 0==n.length?(Object.defineProperty(e,t,r),e[t]):l(n.shift())}};function l(e){return null==e||(e=e.get?e.get():"function"==typeof e?e():e.value||e),e}Object.defineProperty(e,t,o)},r=[n(759),n(775),n(845)],void 0===(a=function(){return window._g||(window._g={}),window._g=$.extend(!0,{},window._g,C),T=C=void 0,window._g}.apply(t,r))||(e.exports=a)}.apply(t,r))||(e.exports=a)}).call(this,n(30))},845:function(e,t,n){(function(t){e.exports=t.Backbone=n(1981)}).call(this,n(30))},846:function(e,t,n){var i,r;i=[t,n(1989)],void 0===(r=function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setShareLink=void 0;e.setShareLink=function(e){var n=(0,t.checkShareLink)(e);n&&window.interaction_view.errorAlert(n),window.message_link=e}}.apply(t,i))||(e.exports=r)},848:function(e,t,n){var i;void 0===(i=function(){"use strict";n(1043),n(849);var t={defaults:{iType:"Page",position:0,description:"",title:"untitled",picture:null,preview:"",thumbnail:null,width:null,height:null,bg_color:"#FFFFFF",bg_opacity:1,show_master:!0},autoIndex:!0,callback:function(){"page_group"!=this.get("type")&&(this.iOverlaylist=new interaction_view.collection.list,this.iAnimationlist=new interaction_view.collection.Animation,this.iActionlist=new interaction_view.collection.Action,this.ipreloadlist=new interaction_view.collection.Preload,this.ipreloadlist.pageid=this.iOverlaylist.pageid=this.iAnimationlist.pageid=this.iActionlist.pageid=this.id,this.iAnimationlist.iPage_id=this.id,this.iAnimationlist.page=this)},overlays:[],actions:[],animations:[]};e.exports=_g.mvc.createModel(t)}.apply(t,[]))||(e.exports=i)},849:function(e,t,n){var i,r;i=[n(213),n(63),n(336),n(984),n(1167),n(1381)],void 0===(r=function(t,i,r,a,o,l){"use strict";var s=n(0);i=s(i),r=s(r),n(1043),n(1184),n(1382);var c=n(218),u={template:n(1184),className:null,containment:"div.slides",wrap:null,wrapClassName:null,autoRender:!0,position:1,parseData:null,callback:function(){"page_group"!=this.model.get("type")&&(this.overlays=this.model.get("overlays"),this.animations=this.model.get("animations"),this.actions=this.model.get("actions")),"page"!=this.model.get("type")&&"config"!=this.model.get("type")||this.renderbg()},bindChange:null,parseTemplate:function(){return"page_group"==this.model.get("type")?_g.parseTemplate(n(1382)):_g.parseTemplate(n(1184))},render:function(e,t){if(!this.model||!this.template)return!1;if(!$.contains(document.documentElement,this.$el[0])){if(interaction_view.foredit){if(!e&&!this.containment)return!1;e||(e=$(this.containment)),t||(t=this.position),this.wrap&&!$(this.containment).is(this.wrap)&&(0==$(this.containment).children(this.wrap).length&&$(this.containment).append(document.createElement(this.wrap)),e=$(this.containment).children(this.wrap),this.containment&&this.wrapClassName&&e.addClass(this.wrapClassName))}return $(".reveal section#"+this.model.id).length>0?(n=$(".reveal section#"+this.model.id)[0],this.setElement(n)):interaction_view.foredit&&(n=this.createEl(),this.setElement(n),1==t?e.append(n):e.prepend(n)),this.model.attributes.is_flow&&(this.model.is_flow=!0),this.afterRender&&this.afterRender(this),this.model.attributes.prevent_slide&&this.$el.attr("prevent_slide",this.model.attributes.prevent_slide),this}var n=this.createEl();this.$el.replaceWith(n),this.setElement(n),this.afterUpdate&&this.afterUpdate(this)},renderbg:function(){var e=this.$el;if(2==interaction_view.screen_mode&&(e=this.$el.children()),this.model.get("picture")&&e.css({"background-image":"url("+this.model.get("picture")+")","background-size":"contain","background-position":"center center","background-repeat":"no-repeat"}),interaction_view.forpreview){var t=this.model.get("bg_color"),n=this.model.get("bg_opacity"),r=-1==(0,i.default)(t).call(t,"rgba")?_g.getRGBA(t,n):t;this.$el.css({"background-color":r})}},prepareLoad:function(){for(var e=[],t=0;t<this.animations.length;t++){(l=$.extend(!0,{},this.animations[t])).pageid=this.model.id,this.isMaster&&(l.pagetype="master"),this.isBackground&&(l.pagetype="background"),this.isConfig&&(l.pagetype="config"),e.push(l)}this.model.iAnimationlist.reset(e);var n=[];(0,a.renderTreeData)(this,this.overlays,(function(e){n=e})),c.remove(n,(function(e){return null==e})),(0,a.renderZindex)(this,n);var i=[],o=function(e){try{var t,n=e.iDetail.results[0].overlay.page_id;return!!(0,r.default)(t=[interaction_view.imasterlist.at(0).id,interaction_view.ibackgroundlist.at(0).id]).call(t,n)}catch(e){return!1}};for(t=0;t<this.actions.length;t++){var l;(l=$.extend(!0,{},this.actions[t])).pageid=this.model.id,this.isMaster&&(l.pagetype="master"),this.isConfig&&(l.pagetype="config"),(this.isMaster||this.isBackground||o(l))&&(l=this.animteOffsetPatchForAction(l)),i.push(l)}this.model.iActionlist.reset(i)},startLoad:function(){0==this.model.ipreloadlist.length?interaction_view.finishPagePreload(this.model.id,this.model):this.model.ipreloadlist.preload()},afterpreload:function(){this.model.iOverlaylist.each((function(e){e.iview.preloaded||e.iview.afterpreload()})),this.hasRenderActionlist?this.model.iActionlist.each((function(e){e.iview&&((0,r.default)(c).call(c,[0,1,2,4,6,7,14,15,20,21,99],e.get("iType"))?e.iview.render({init:!1}):3==e.get("iType")&&interaction_view.isWeixin&&52==e.get("iDetail").results[0].iAction&&e.iview.patchPlay($(document),e.iview))})):(this.hasRenderActionlist={},this.model.iActionlist.each((function(e){e.iview&&e.iview.render({init:!0})})))},clearPageLoad:function(){this.model.isRedirect||this.model.cacheAll||this.model.get("loaded")&&((0,l.clearPage)(this.model),this.model.isStartLoad=!1,this.model.playFinished=!1,this.ipreloadlist=new interaction_view.collection.Preload,this.model.unset("loaded",{silent:!0}),this.model.firstPlayFinished=!0),presentation.pageClearCenter(this.model.id)},animateOffsetPatch:function(e){return Reveal.marginLeft&&(e._offset_x=Reveal.marginLeft),Reveal.marginTop&&(e._offset_y=Reveal.marginTop),e},animteOffsetPatchForAction:function(e){if(e.iDetail.results[0]&&404==e.iDetail.results[0].iAction)try{null!=e.iDetail.results[0].position_y&&(e.iDetail.results[0].position_y=Number(e.iDetail.results[0].position_y)+Reveal.marginTop),null!=e.iDetail.results[0].position_x&&(e.iDetail.results[0].position_x=Number(e.iDetail.results[0].position_x)+Reveal.marginLeft)}catch(t){return e}return e},offsetPatchForStateGroup:function(e){if("StateGroup"===e.iType)try{e.iDetail.patchMarginTop=Reveal.marginTop,e.iDetail.patchMarginLeft=Reveal.marginLeft}catch(t){return e}return e}};e.exports=u}.apply(t,i))||(e.exports=r)},861:function(e,t,n){var i,r;i=[n(14),n(78),n(154),n(100)],void 0===(r=function(t,i,r,a){"use strict";var o=n(0);t=o(t),i=o(i),r=o(r),n(1043),n(848);var l=n(775),s={enableSync:!1,model:n(848),getTreeModels:function(e){var t=[];return e.each((function(e){if(t.push(e),e.icollection)for(var n=_g.mvc.getTreeModels(e.icollection),i=0;i<n.length;i++)t.push(n[i])})),t},getPageModels:function(){return this.pagemodels||(this.pagemodels=this.getTreeModels(this)),this.pagemodels},getPages:function(){var e=this.getPageModels();return e=l.reject(e,(function(e){return"page_group"==e.toJSON().type}))},getPagesJSON:function(){var e=this.getPageModels();return e=l.reject(e,(function(e){return"page_group"==e.toJSON().type})),e=(0,t.default)(l).call(l,e,(function(e){return e.toJSON()}))},getPage:function(e){var t=this.getPageModels();return(0,i.default)(l).call(l,t,(function(t){return t.id==e}))},getIndexPages:function(){var e=this.getPages();return(0,r.default)(l).call(l,e,(function(e){return e.get("is_index")}))},getElement:function(e,t,n){return interaction_view.ipagelist.getPage(t)||interaction_view.imasterlist.get(t)?(interaction_view.ipagelist.getPage(t)||interaction_view.imasterlist.get(t)).iOverlaylist.get(n):e.iOverlaylist.get(n)}};e.exports=_g.mvc.createCollection(s)}.apply(t,i))||(e.exports=r)},898:function(e,t,n){"use strict";var i=n(47),r=n(1982),a=n(171);n(172)("search",1,(function(e,t,n,o){return[function(n){var i=e(this),r=null==n?void 0:n[t];return void 0!==r?r.call(n,i):new RegExp(n)[t](String(i))},function(e){var t=o(n,e,this);if(t.done)return t.value;var l=i(e),s=String(this),c=l.lastIndex;r(c,0)||(l.lastIndex=0);var u=a(l,s);return r(l.lastIndex,c)||(l.lastIndex=c),null===u?-1:u.index}]}))},984:function(e,t,n){var i,r,a=n(63);i=[t,n(14),n(78),n(63),n(1041)],void 0===(r=function(e,t,i,r,o){"use strict";var l=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.getIndexByGroups=e.setLayerZindex=e.refactorLayerOverlays=e.renderLayerZindex=e.renderZindex=e.setzIndexbyGroup=e.renderTreeData=e.initOverflow=e.getContainerChildData=e.getOverlaysDataByRoot=void 0,t=l(t),i=l(i),r=l(r);var s=n(218),c=function(e,n){var i=[],r=null!=e.model.get("groups")&&null!=e.model.get("groups").root&&0!=e.model.get("groups").root.length&&e.model.get("groups").root;return r?(0,t.default)(s).call(s,r,(function(e){(0,t.default)(s).call(s,n,(function(t){!t||t.id,t.id==e&&(t.iParentId=null,i.push(t))}))})):i=n,i};e.getOverlaysDataByRoot=c;var u=function(e,n){var i=e.model.get("groups"),r=[];if(i&&!i.root)return r;var a=s.omit(i,["root"]);return s.mapKeys(a,(function(e,i){e.length&&(0,t.default)(s).call(s,e,(function(e){(0,t.default)(s).call(s,n,(function(t){t.id==e&&(t.iParentId=i,r.push(t))}))}))})),r};e.getContainerChildData=u;var d=function(e,t,n){var i=$.extend(!0,{},t);if(interaction_view.model[i.iType])return i.pageid=e.model.id,i.zIndex=n,e.isMaster?(i.pagetype="master",interaction_view.doc.attributes.force_landscape||(i=e.animateOffsetPatch(i),i=e.offsetPatchForStateGroup(i)),"Audio"==i.iType&&i.iDetail.iAutoplay&&!interaction_view.hasbgsound&&(interaction_view.hasbgsound=!0,i.isBgsound=!0)):e.isConfig&&(i.pagetype="config"),new interaction_view.model[i.iType](i)};e.initOverflow=function(e){var t,n;e.model.get("iDetail").iOverflow?(0,i.default)(t=e.$el).call(t,".el_wrap.bk_full").css("overflow","hidden"):(0,i.default)(n=e.$el).call(n,".el_wrap.bk_full").css("overflow","visible")};e.renderTreeData=function(e,n,i){var r=[],a=c(e,n),o=u(e,n),l=null!=e.model.get("groups")&&e.model.get("groups").root;if(l&&l.length){var s=e.model.get("groups");(0,t.default)(a).call(a,(function(n,i){var a;(r.push(d(e,n,i)),s[n.id])&&(0,t.default)(a=s[n.id]).call(a,(function(n){(0,t.default)(o).call(o,(function(t,i){n==t.id&&r.push(d(e,t,i))}))}))}))}else for(var h=0;h<e.overlays.length;h++)r.push(d(e,e.overlays[h],h));i(r)};var h=function(e,n){s.mapKeys(n,(function(n,i){(0,t.default)(s).call(s,n,(function(t,n){var i=e.get(t);i&&i.iview.setZindex(n+1)}))}))};e.setzIndexbyGroup=h;e.renderZindex=function(e,t){e.model.iOverlaylist.reset(t);var n=e.model.get("groups");!!(n&&n.root&&n.root.length>0)?h(e.model.iOverlaylist,n):e.model.iOverlaylist.each((function(e,t){e.iview.setZindex(t+1)}))};e.renderLayerZindex=function(e,t,n){e.model.layer[n].iOverlaylist.reset(t);var i=interaction_view.ilayerlist.get(n);if(i){var r=i.get("groups");!!(r&&r.root&&r.root.length>0)?h(e.model.layer[n].iOverlaylist,r):e.model.layer[n].iOverlaylist.each((function(e,t){e.iview.setZindex(t+1)}))}};e.refactorLayerOverlays=function(e,t){var n=interaction_view.ilayerlist.get(t);if(n){var i=n.get("groups");!!(i&&i.root&&i.root.length>0)&&(e=s.sortBy(e,(function(e){var t;return(0,r.default)(t=i.root).call(t,e.id)})))}return e};e.setLayerZindex=function(e){var t=e.model.get("layerid"),n="LayerRef"==e.pagetype,i=e.model.id;if(n&&t){var a,o=interaction_view.ilayerlist.get(t).get("groups");if(!!!(o&&o.root&&o.root.length>0))return!1;s.mapKeys(o,(function(e,t){if((a=(0,r.default)(s).call(s,e,i))>-1)return a}))}};e.getIndexByGroups=function(e){var t,n=e.model.page,i=n.attributes&&n.attributes.groups?n.get("groups"):null,l=e.model.id,s=0;i&&"background"==n.attributes.type?(0,o.mapObjIndexed)((function(e,t,n){var i=a(o)(l,e);e.length&&-1!=i&&(s=i)}),i):s=(0,r.default)(t=e.model.page.iOverlaylist).call(t,e.model);return s}}.apply(t,i))||(e.exports=r)},994:function(e,t,n){var i,r;i=[n(125),n(801),n(54),n(63)],void 0===(r=function(a,o,l,s){"use strict";var c=n(0);s=c(s),function(){var a,o,l,c,u,d,h,f,p={};o=window.document.documentElement,f=window.navigator.userAgent.toLowerCase(),p.ios=function(){return p.iphone()||p.ipod()||p.ipad()},p.iphone=function(){return l("iphone")},p.ipod=function(){return l("ipod")},p.ipad=function(){return l("ipad")},p.android=function(){return l("android")},p.androidPhone=function(){return p.android()&&l("mobile")},p.androidTablet=function(){return p.android()&&!l("mobile")},p.blackberry=function(){return l("blackberry")||l("bb10")||l("rim")},p.blackberryPhone=function(){return p.blackberry()&&!l("tablet")},p.blackberryTablet=function(){return p.blackberry()&&l("tablet")},p.windows=function(){return l("windows")},p.mac=function(){return-1!=(0,s.default)(f).call(f,"mac")&&-1==(0,s.default)(f).call(f,"iphone")},p.linux=function(){return l("linux")},p.windowsPhone=function(){return p.windows()&&l("phone")},p.windowsTablet=function(){return p.windows()&&l("touch")},p.fxos=function(){return(l("(mobile;")||l("(tablet;"))&&l("; rv:")},p.fxosPhone=function(){return p.fxos()&&l("mobile")},p.fxosTablet=function(){return p.fxos()&&l("tablet")},p.meego=function(){return l("meego")},p.mobile=function(){return p.androidPhone()||p.iphone()||p.ipod()||p.windowsPhone()||p.blackberryPhone()||p.fxosPhone()||p.meego()},p.tablet=function(){return p.ipad()||p.androidTablet()||p.blackberryTablet()||p.windowsTablet()||p.fxosTablet()},p.msie=function(){return $.browser.msie||!!navigator.userAgent.match(/Trident\/7\./)},p.portrait=function(){return 90!==Math.abs(window.orientation)},p.landscape=function(){return 90===Math.abs(window.orientation)},p.noConflict=function(){return this},p.svg=function(){return document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Shape","1.1")},p.online=function(e,t,n){var i=new Image;i.onload=function(){t&&t.constructor==Function&&t()},i.onerror=function(){n&&n.constructor==Function&&n()},i.src=e+"?t="+_g.uuid()},p.WKWebview=function(){return!0===window.__wxjs_is_wkwebview},p.screenSize=function(){var e=window,t=document,n=t.documentElement,i=t.getElementsByTagName("body")[0];return{x:e.innerWidth||n.clientWidth||i.clientWidth,y:e.innerHeight||n.clientHeight||i.clientHeight}},p.isWeixin=function(){var e=navigator.userAgent.toLowerCase(),t=/windowswechat/.test(e);return!(!/micromessenger/.test(e)||t)},p.isWeibo=function(){var e=navigator.userAgent.toLowerCase();return/weibo/.test(e)},p.isQQ=function(){var e=navigator.userAgent.toLowerCase();return/qq/.test(e)},p.isMPBank=function(){var e=navigator.userAgent.toLowerCase();return/mpbank/.test(e)},l=function(e){return-1!==(0,s.default)(f).call(f,e)},u=function(e){var t;return t=new RegExp(e,"i"),o.className.match(t)},a=function(e){if(!u(e))return o.className+=" "+e},h=function(e){if(u(e))return o.className=o.className.replace(e,"")};c=function(){return p.landscape()?(h("portrait"),a("landscape")):(h("landscape"),a("portrait"))},d="onorientationchange"in window?"orientationchange":"resize",window.addEventListener?window.addEventListener(d,c,!1):window.attachEvent?window.attachEvent(d,c):window[d]=c,c(),p.initDom=function(){p.ios()?p.ipad()?a("ios ipad tablet"):p.iphone()?a("ios iphone mobile"):p.ipod()&&a("ios ipod mobile"):p.android()?p.androidTablet()?a("android tablet"):a("android mobile"):p.blackberry()?p.blackberryTablet()?a("blackberry tablet"):a("blackberry mobile"):p.windows()?p.windowsTablet()?a("windows tablet"):p.windowsPhone()?a("windows mobile"):a("desktop"):p.fxos()?p.fxosTablet()?a("fxos tablet"):a("fxos mobile"):p.meego()?a("meego mobile"):a("desktop")},window._g_device=p,i=[n(807)],void 0===(r=function(){return window._g.device=window._g_device,window._g.device}.apply(t,i))||(e.exports=r)}()}.apply(t,i))||(e.exports=r)},995:function(e,t,n){var i,r,a=n(26),o=n(155),l=n(154),s=n(153),c=n(338);i=[t,n(160),n(20),n(102),n(797),n(23),n(11),n(153),n(336),n(14),n(3),n(154),n(26),n(1167)],void 0===(r=function(e,t,i,r,u,d,h,f,p,v,m,g,_,w){"use strict";var y=n(0);function b(e,t){var n=a(e);if(o){var i=o(e);t&&(i=l(i).call(i,(function(t){return s(e,t).enumerable}))),n.push.apply(n,i)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){(0,d.default)(e,t,n[t])})):c?Object.defineProperties(e,c(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,s(n,t))}))}return e}function $(e,t,n,i){var r,a=arguments.length,o=a<3?t:null===i?i=(0,f.default)(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":(0,h.default)(Reflect))&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(r=e[l])&&(o=(a<3?r(o):a>3?r(t,n,o):r(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,t=y(t),i=y(i),r=y(r),u=y(u),d=y(d),h=y(h),f=y(f),p=y(p),v=y(v),m=y(m),g=y(g),_=y(_);var k={next:function(){},complete:function(){},observers:[]},S=function(e,t,n){var i=n.value;return x(x({},n),{},{value:function(e){var t,n=null!=(t=null==this?void 0:this._disabledSubjects)?t:[],r=arguments;return(0,p.default)(n).call(n,e)?k:i.apply(this,r)}})},A=function(e,t,n){var i=n.value;return x(x({},n),{},{value:function(){var e=this["_".concat(t)],n=arguments,r=(0,u.default)(n,1),a=r[0];if(e[a])return i.apply(this,n);var o="Event: ".concat(a," is not registered! ");throw new Error(o)}})},E=["Subject","BehaviorSubject","AsyncSubject","ReplaySubject"],T=function(){function e(){return(0,i.default)(this,e),this._subject={},this._behaviorSubject={},this._replaySubject={},this._asyncSubject={},this._disabledSubjects=[],this}return(0,r.default)(e,[{key:"createSubject",value:function(e){var t=new w.Subject;return this._subject[e]||(this._subject[e]=t),t}},{key:"createAsyncSubject",value:function(e){var t=new w.AsyncSubject;return this._asyncSubject[e]||(this._asyncSubject[e]=t),t}},{key:"createBehaviorSubject",value:function(e,t){var n=new w.BehaviorSubject(t);return this._behaviorSubject[e]||(this._behaviorSubject[e]=n),n}},{key:"createReplaySubject",value:function(e){var t=new w.ReplaySubject;return this._replaySubject[e]||(this._replaySubject[e]=t),t}},{key:"register",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Subject",i=arguments.length>2?arguments[2]:void 0;if("string"==typeof e)switch(n){case"Subject":this.createSubject(e);case"AsyncSubject":this.createAsyncSubject(e);case"BehaviorSubject":this.createBehaviorSubject(e,i);case"ReplaySubject":this.createReplaySubject(e)}else null!=e&&e.length&&(0,v.default)(e).call(e,(function(e){return t.register(e,n,i)}))}},{key:"subject",value:function(e){var t;return null!=(t=this._subject[e])?t:this.register(e)}},{key:"behaviorSubject",value:function(e){return this._behaviorSubject[e]}},{key:"replaySubject",value:function(e){return this._replaySubject[e]}},{key:"asyncSubject",value:function(e){return this._asyncSubject[e]}},{key:"disable",value:function(e){var n,i;(0,p.default)(n=this._disabledSubjects).call(n,e)||(this._disabledSubjects=(0,m.default)(i=[]).call(i,(0,t.default)(this._disabledSubjects),[e]))}},{key:"enable",value:function(e){var n,i;(0,p.default)(n=this._disabledSubjects).call(n,e)&&(this._disabledSubjects=(0,t.default)((0,g.default)(i=this._disabledSubjects).call(i,(function(t){return t!==e}))))}},{key:"remove",value:function(e,t){this.removeSubscriptions(e,t),delete this._asyncSubject[e],delete this._behaviorSubject[e],delete this._replaySubject[e],delete this._subject[e]}},{key:"removeSubscriptions",value:function(e,t){this.getAll(e,t).forEach((function(e){e.observers.forEach((function(e){return e.unsubscribe()}))}))}},{key:"get",value:function(e,t){if(!t)return this._getAnySubject(e);switch(t){case"Subject":return this._subject[e];case"AsyncSubject":return this._asyncSubject[e];case"BehaviorSubject":return this._behaviorSubject[e];case"ReplaySubject":return this._replaySubject[e]}}},{key:"getAll",value:function(e,t){var n=this,i=[];return E.forEach((function(r){(!t||t===r)&&n.get(e,r)&&i.push(n.get(e,r))})),i}},{key:"_getAnySubject",value:function(e){var t,n,i;return null!=(t=null!=(n=null!=(i=this._subject[e])?i:this._asyncSubject[e])?n:this._behaviorSubject[e])?t:this._replaySubject[e]}},{key:"destroy",value:function(){var e=this;(0,_.default)(this._asyncSubject).forEach((function(t){return e.removeSubscriptions(t)})),(0,_.default)(this._behaviorSubject).forEach((function(t){return e.removeSubscriptions(t)})),(0,_.default)(this._subject).forEach((function(t){return e.removeSubscriptions(t)})),(0,_.default)(this._replaySubject).forEach((function(t){return e.removeSubscriptions(t)}))}}]),e}();$([function(e,t,n){var i=n.value;return x(x({},n),{},{value:function(){var e=this,t=arguments,n=(0,u.default)(t,1),r=n[0];if("string"==typeof r){var a=e._subject[r]||e._behaviorSubject[r]||e._asyncSubject[r]||e._replaySubject[r];if(a){var o="Event: ".concat(r," has been already registered! ");throw new Error(o)}return i.apply(this,t)}return i.apply(this,t)}})}],T.prototype,"register",null),$([A,S],T.prototype,"subject",null),$([A,S],T.prototype,"behaviorSubject",null),$([A,S],T.prototype,"replaySubject",null),$([A,S],T.prototype,"asyncSubject",null);var C=T;e.default=C}.apply(t,i))||(e.exports=r)}}]);