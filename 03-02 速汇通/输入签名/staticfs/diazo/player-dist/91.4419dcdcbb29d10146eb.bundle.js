(window.webpackJsonp=window.webpackJsonp||[]).push([[91],{2650:function(t,n,e){var i,o,a=e(26),l=e(155),r=e(154),u=e(153),c=e(338);i=[e(23),e(78),e(154),e(14),e(339),e(3)],void 0===(o=function(t,n,i,o,f,d){"use strict";var s=e(0);function m(t,n){var e=a(t);if(l){var i=l(t);n&&(i=r(i).call(i,(function(n){return u(t,n).enumerable}))),e.push.apply(e,i)}return e}t=s(t),n=s(n),i=s(i),o=s(o),f=s(f),d=s(d),e(1413);var v=e(218),p=e(1059);interaction_view.model.ContactForm=interaction_view.model.Base.extend({setcollection:function(){iOverlaylist.get(this.id)||iOverlaylist.add(this)},setview:function(t){this.iview=new interaction_view.view.ContactForm({model:this})},setsyncmodel:function(){}}),interaction_view.view.ContactForm=interaction_view.view.InfoForm.extend({bindSubmitTrigger:function(e,a){var l,r,s,h=this,w=this,b=w.getdetail(),y=["fullname","mobile","address","email","memo"],_=w.button?(0,n.default)(l=w.button.$el).call(l,".iconNormal"):null,$=function(t){return h["input_".concat(t)]},g=function(t){var e;return t&&(0,n.default)(e=t.$el).call(e,".Element").children()},E=(0,i.default)(r=(0,o.default)(s=(0,o.default)(y).call(y,$)).call(s,g)).call(r,(function(t){return t})),O=function(){return E.forEach((function(t){return t.val("")}))},F=function(t){var n;return(0,f.default)(n=t.val()).call(n)},j=function(t){return b[t]},x=[{$input:g($("fullname")),overlay:$("fullname"),shown:j("show_name")},{$input:g($("mobile")),overlay:$("mobile"),shown:j("show_tel")},{$input:g($("address")),overlay:$("address"),shown:j("show_address")},{$input:g($("email")),overlay:$("email"),shown:j("show_email")},{$input:g($("memo")),overlay:$("memo"),shown:j("show_memo")}];x.forEach((function(t){t.shown||t.overlay.$el.addClass("forceHide")}));var C=interaction_view.events.onContactFormSubmit,S=function(){return C(w.button,83)},k=function(){var n,a,l,r=(0,i.default)((l=(0,o.default)(a=(0,i.default)(x).call(x,(function(t){return t.$input&&t.$input.length&&t.shown}))).call(a,(function(t){return{value:F(t.$input),overlay:t.overlay}})),n=p.checkByEpub(l))).call(n,(function(t){return!t.valid}));if(r.length)p.popError(r);else{var f,s=v.zipObject(y,(0,o.default)(f=(0,i.default)(x).call(x,(function(t){return t.$input&&t.$input.length}))).call(f,(function(t){return F(t.$input)}))),h=function(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?m(Object(i),!0).forEach((function(e){(0,t.default)(n,e,i[e])})):c?Object.defineProperties(n,c(i)):m(Object(i)).forEach((function(t){Object.defineProperty(n,t,u(i,t))}))}return n}({id:w.model.get("id"),title:w.model.get("iDetail").title,share_id:e},s);_g.ajax.post({dataType:"JSON",url:context_url+"form/",data:h,callback:function(t){200==t.code?(!function(){for(var t,n=arguments.length,e=new Array(n),i=0;i<n;i++)e[i]=arguments[i];C.apply(void 0,(0,d.default)(t=[w.button,82]).call(t,e))}(b.submit_info||"提交成功!",O),"function"==typeof epub360FromSubmited&&window.epub360FromSubmited(h)):S()},onError:function(){return S()}})}}.bind(this);_&&_.hammer().on("tap",k)}})}.apply(n,i))||(t.exports=o)}}]);