(window.webpackJsonp=window.webpackJsonp||[]).push([[83],{2664:function(e,i,t){var l,n;l=[t(54),t(98),t(213),t(125),t(78)],void 0===(n=function(e,i,l,n,o){"use strict";var r=t(0);o=r(o),epub360.PlayerPlugins.push({config:{type:"dynamic_table",template:"Container"},immediateRender:function(e){(0,o.default)(i=this.$el).call(i,".el_wrap");var i,t=this.getdetail(),l=(this.common,t.db_id),n=t.query_id;t.iRow,t.iCellHeight,t.iBorderShow,t.iBorderWidth,t.iBorderColor,t.iColType,t.iTableColor,t.iCol,t.fields,t.colWidthSet,new window.dboperate;this.page=1,delete t.query,this.renderQuery(l,n,{},e)},setScroll:function(e,i,t,l){var n=this,r=this.getdetail();if(!(0,o.default)(e).call(e,"table").first().is(":hidden")){var a=!0,u=!0;if(r.iPulldown&&i||(u=!1),r.iPullUp&&i||(a=!1),!r.iPulldown&&!r.iPullUp&&!i)if(this.model.attributes.iCommon.landscape.iHeight>=this.getTableHeight())return;var d=r.db_id,s=r.query_id;r.iRow,r.iCol;interaction_view.renderScroll({containment:e,contentel:(0,o.default)(e).call(e,"table").first(),view:n,pullUp:a,content_y:l||0,onPullUp:function(){n.page++;var e=r.query||{};e.key&&e.value?n.renderQuery(d,s,{size:n.page,key:e.key,value:e.value,isPullUp:!0}):n.renderQuery(d,s,{size:n.page,isPullUp:!0})},pullDown:u,onPullDown:function(){var e;(0,o.default)(e=n.$el).call(e,".info_content").css("height",""),n.immediateRender()}})}},resetOtherStatus:function(){},setotherdisplay:function(){},otherOnShow:function(){this.immediateRender()},otherOnHide:function(){},onInitialize:function(){},onEpubReady:function(){},onStop:function(){},onPlay:function(){},getTableHeight:function(){var e=this.getdetail();return Number(e.iCellHeight)*e.iRow+e.iBorderWidth*(Number(e.iRow)+1)},refresh:function(e){var i;(0,o.default)(i=this.$el).call(i,".info_content").css("height",""),this.immediateRender((function(){e.done()}))},renderQuery:function(e,i,t,l){var n,r=this,a=new window.dboperate,u=this.getdetail(),d=u.fields,s=[],c=(0,o.default)(n=r.$el).call(n,".el_wrap"),h=u.iCellHeight,p=u.iBorderShow,f=u.iBorderWidth,w=u.iBorderColor,v=u.iColType,g=u.iTableColor,y=u.iCol,b=u.colWidthSet,m=(this.common,/\$[^\$]+\$/g),C=[],P=u.db_dbtype,S=u.iRow;t||(t={}),t.size||(t.size=1,r.page=t.size),_.each(d,(function(e){var i=e.match(m);if(i&&1==i.length&&4==interaction_view.expression.getFieldstype(i[0]))return s.push("4"),!0;switch(e){case"@u_portrait@":s.push("4");break;default:s.push("2")}})),e&&i?(c.children("table").remove(),a.getqueryValue(e,i,t.size,S,(function(e){var i=e.data?e.data.results:e;if(0==i.length&&1!=r.page)return r.page--,!1;var n=[];_.each(d,(function(e,t){var l=e.match(m),o=[],r=s[t];_.each(i,(function(i){var t=e;_.each(l,(function(e,l){var n=interaction_view.expression.getFieldValue(e,i);t=t.replace(e,n)}));var n=interaction_view.expression.id2values(t,null,{force_compute:!0});o.push({type:r,value:n})})),n.push(o),C.push(e)}));var u=new window.D_Table({dom:c,width:"100%",height:"100%",cellHeight:h,borderShow:p,borderWidth:f,borderColor:w,colType:v,tableColor:g});1==r.page?u.render(n,y,S,b):u.append(n,y,S,b,(0,o.default)(c).call(c,"table"));var P={y:null};r.scrollview&&t.isPullUp&&(P=r.scrollview.iScroll.getComputedPosition()),r.setScroll(c,a,u,P.y),l&&l()}),{query:{key:t.key,value:t.value},type:P})):l&&l()}})}.apply(i,l))||(e.exports=n)}}]);