(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{1976:function(e,t,i){var a,n;a=[t,i(51),i(63),i(3),i(1977)],void 0===(n=function(e,t,a,n,s){"use strict";var o,r,c=i(0);Object.defineProperty(e,"__esModule",{value:!0}),e.unload=e.pageChange=e.start=void 0,t=c(t),a=c(a),n=c(n);var l=function(e){return"2004"===s.api.scormVersion?"cmi.".concat(e):"cmi.core.".concat(e)};e.start=function(){var e;r=new Date,s.api.initialize(),"not attempted"===s.api.getStatus()&&s.api.setStatus("incomplete");var i=s.api.dataGet(l("lesson_location"));e=i&&window.confirm("Would you like to resume from where you previously left off?")?(0,t.default)(i,10):0,window.epub360.api.letiables={start_page:e};try{e&&setTimeout((function(){window.epub360.api.doc.goToPage(e)}),10)}catch(e){}};e.pageChange=function(e){var t=window.interaction_view.ipagelist,i=t.getPages(),n=(0,a.default)(i).call(i,t.getPage(e));s.api.dataSet(l("lesson_location"),n),n===i.length-1&&s.api.setStatus("completed")};function u(e,t){var i,a,n;if((a=(i=String(e)).length)>t)i=i.substr(0,t);else for(n=a;n<t;n++)i="0".concat(i);return i}e.unload=function(){if(!o){o=!0;var e=function(e,t){var i,a,s,o,r,c,l,d;t||(t=!0);1e4===(s=(e-(c=e%1e3)-1e3*(r=(e-c)/1e3%60)-6e4*(o=(e-c-1e3*r)/6e4%60))/36e5)&&(100===(o=(e-36e5*(s=9999))/6e4)&&(o=99),o=Math.floor(o),100===(r=(e-36e5*s-6e4*o)/1e3)&&(r=99),r=Math.floor(r),c=e-36e5*s-6e4*o-1e3*r);l=Math.floor(c/10),d=(0,n.default)(i=(0,n.default)(a="".concat(u(s,4),":")).call(a,u(o,2),":")).call(i,u(r,2)),t&&(d+=".".concat(l));s>9999&&(d="9999:99:99",t&&(d+=".99"));return d}((new Date).getTime()-r.getTime(),!1);s.api.dataSet(l("session_time"),e),s.api.terminate()}}}.apply(t,a))||(e.exports=n)},1977:function(e,t,i){var a,n;a=[t,i(1978)],void 0===(n=function(e,t){"use strict";var a=i(0);Object.defineProperty(e,"__esModule",{value:!0}),e.api=void 0;var n=new((t=a(t)).default)(!0);e.api=n}.apply(t,a))||(e.exports=n)},1978:function(e,t,i){var a,n;a=[t,i(8),i(10),i(3),i(51),i(11),i(20),i(102),i(23)],void 0===(n=function(e,t,a,n,s,o,r,c,l){"use strict";var u=i(0);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n=u(n),s=u(s),o=u(o),r=u(r),c=u(c),l=u(l);var d=function(){function e(t){(0,r.default)(this,e),(0,l.default)(this,"apiHandle",void 0),(0,l.default)(this,"scormVersion",void 0),(0,l.default)(this,"debugModeEnabled",void 0),(0,l.default)(this,"handleCompletionStatus",void 0),(0,l.default)(this,"handleExitMode",void 0),(0,l.default)(this,"apiIsFound",void 0),(0,l.default)(this,"connectionIsActive",void 0),(0,l.default)(this,"dataCompletionStatus",void 0),(0,l.default)(this,"dataExitStatus",void 0),this.debugModeEnabled=t,this.scormVersion="",this.apiHandle=null,this.dataCompletionStatus=null,this.dataExitStatus=null,this.handleCompletionStatus=!0,this.handleExitMode=!0,this.apiIsFound=!1,this.connectionIsActive=!1}return(0,c.default)(e,[{key:"initialize",value:function(){var e,t=!1,i="ScormApiWrapper.initialize ";if(this.trace("initialize called."),this.connectionIsActive)this.trace("".concat(i,"aborted: Connection already active."));else{var a=this.getApiHandle(),s=0;if(a){switch(this.scormVersion){case"1.2":t=this.stringToBoolean(a.LMSInitialize(""));break;case"2004":t=this.stringToBoolean(a.Initialize(""))}var o,r;if(t)if(null!==(s=this.getCode())&&0===s){if(this.connectionIsActive=!0,this.handleCompletionStatus&&(e=this.getStatus())){switch(e){case"not attempted":case"unknown":this.setStatus("incomplete")}this.save()}}else t=!1,this.trace((0,n.default)(o="".concat(i,"failed. \nError code: ").concat(s," \nError info: ")).call(o,this.getInfo(s)));else if(null!==(s=this.getCode())&&0!==s)this.trace((0,n.default)(r="".concat(i,"failed. \nError code: ").concat(s," \nError info: ")).call(r,this.getInfo(s)));else this.trace("".concat(i,"failed: No response from server."))}else this.trace("".concat(i,"failed: API is null."))}return t}},{key:"terminate",value:function(){var e=!1,t=this.dataExitStatus,i=this.dataCompletionStatus;if(this.connectionIsActive){var a=this.getApiHandle(),s=0;if(a){if(this.handleExitMode&&!t)if("completed"!==i&&"passed"!==i)switch(this.scormVersion){case"1.2":this.dataSet("cmi.core.exit","suspend");break;case"2004":this.dataSet("cmi.exit","suspend")}else switch(this.scormVersion){case"1.2":this.dataSet("cmi.core.exit","logout");break;case"2004":this.dataSet("cmi.exit","normal")}if(e="1.2"!==this.scormVersion||this.save()){switch(this.scormVersion){case"1.2":e=this.stringToBoolean(a.LMSFinish(""));break;case"2004":e=this.stringToBoolean(a.Terminate(""))}var o;if(e)this.connectionIsActive=!1;else s=this.getCode(),this.trace((0,n.default)(o="".concat("terminate ","failed. \nError code: ").concat(s," \nError info: ")).call(o,this.getInfo(s)))}}else this.trace("".concat("terminate ","failed: API is null."))}else this.trace("".concat("terminate ","aborted: Connection already terminated."));return e}},{key:"isAvailable",value:function(){return!0}},{key:"findApi",value:function(e){for(var t,i=null,a=0;!e.API&&!e.API_1484_11&&e.parent&&e.parent!==e&&a<=500;)a++,e=e.parent;if(this.scormVersion)switch(this.scormVersion){case"2004":e.API_1484_11?i=e.API_1484_11:this.trace("".concat("ScormApiWrapper.find",": SCORM version 2004 was specified by user, but API_1484_11 cannot be found."));break;case"1.2":e.API?i=e.API:this.trace("".concat("ScormApiWrapper.find",": SCORM version 1.2 was specified by user, but API cannot be found."))}else e.API_1484_11?(this.scormVersion="2004",i=e.API_1484_11):e.API&&(this.scormVersion="1.2",i=e.API);i?(this.trace("".concat("ScormApiWrapper.find",": API found. Version: ").concat(this.scormVersion)),this.trace("API: ".concat(i))):this.trace((0,n.default)(t="".concat("ScormApiWrapper.find",": Error finding API. \nFind attempts: ").concat(a,". \nFind attempt limit: ")).call(t,500));return i}},{key:"getApi",value:function(){var e,t=window;return!(e=this.findApi(t))&&t.parent&&t.parent!==t&&(e=this.findApi(t.parent)),!e&&t.top&&t.top.opener&&(e=this.findApi(t.top.opener)),!e&&t.top&&t.top.opener&&t.top.opener.document&&(e=this.findApi(t.top.opener.document)),e?this.apiIsFound=!0:this.trace("API.get failed: Can't find the API!"),e}},{key:"getApiHandle",value:function(){return this.apiHandle||this.apiIsFound||(this.apiHandle=this.getApi()),this.apiHandle}},{key:"getCode",value:function(){var e=this.getApiHandle(),t=0;if(e)switch(this.scormVersion){case"1.2":t=(0,s.default)(e.LMSGetLastError(),10);break;case"2004":t=(0,s.default)(e.GetLastError(),10)}else this.trace("ScormApiWrapper.getCode failed: API is null.");return t}},{key:"dataGet",value:function(e){var t,i="",a="ScormApiWrapper.dataGet('".concat(e,"') ");if(this.connectionIsActive){var s=this.getApiHandle(),o=0;if(s){switch(this.scormVersion){case"1.2":i=s.LMSGetValue(e);break;case"2004":i=s.GetValue(e)}var r,c;if(o=this.getCode(),""!==i||0===o)switch(e){case"cmi.core.lesson_status":case"cmi.completion_status":this.dataCompletionStatus=i;break;case"cmi.core.exit":case"cmi.exit":this.dataExitStatus=i}else this.trace((0,n.default)(r=(0,n.default)(c="".concat(a,"failed. \nError code: ")).call(c,o,"\nError info: ")).call(r,this.getInfo(o)))}else this.trace("".concat(a,"failed: API is null."))}else this.trace("".concat(a,"failed: API connection is inactive."));return this.trace((0,n.default)(t="".concat(a," value: ")).call(t,i)),String(i)}},{key:"dataSet",value:function(e,t){var i,a=!1,s="ScormApiWrapper.dataSet('".concat(e,"') ");if(this.connectionIsActive){var o=this.getApiHandle(),r=0;if(o){switch(this.scormVersion){case"1.2":a=this.stringToBoolean(o.LMSSetValue(e,t));break;case"2004":a=this.stringToBoolean(o.SetValue(e,t))}var c,l;if(a)"cmi.core.lesson_status"!==e&&"cmi.completion_status"!==e||(this.dataCompletionStatus=t);else r=this.getCode(),this.trace((0,n.default)(c=(0,n.default)(l="".concat(s,"failed. \nError code: ")).call(l,r,". \nError info: ")).call(c,this.getInfo(r)))}else this.trace("".concat(s,"failed: API is null."))}else this.trace("".concat(s,"failed: API connection is inactive."));return this.trace((0,n.default)(i="".concat(s," value: ")).call(i,t)),a}},{key:"getStatus",value:function(){var e="";switch(this.scormVersion){case"1.2":e="cmi.core.lesson_status";break;case"2004":e="cmi.completion_status"}return this.dataGet(e)}},{key:"setStatus",value:function(e){var t,i="";switch(this.scormVersion){case"1.2":i="cmi.core.lesson_status";break;case"2004":i="cmi.completion_status"}return""!==e?t=this.dataSet(i,e):(t=!1,this.trace("".concat("ScormApiWrapper.setStatus failed",": status was not specified."))),t}},{key:"save",value:function(){var e=!1;if(this.connectionIsActive){var t=this.getApiHandle();if(t)switch(this.scormVersion){case"1.2":e=this.stringToBoolean(t.LMSCommit(""));break;case"2004":e=this.stringToBoolean(t.Commit(""))}else this.trace("".concat("ScormApiWrapper.save failed",": API is null."))}else this.trace("".concat("ScormApiWrapper.save failed",": API connection is inactive."));return e}},{key:"trace",value:function(e){this.debugModeEnabled&&console&&console.log}},{key:"getInfo",value:function(e){var t=this.getApiHandle(),i="";if(t)switch(this.scormVersion){case"1.2":i=t.LMSGetErrorString(e.toString());break;case"2004":i=t.GetErrorString(e.toString())}else this.trace("ScormApiWrapper.getInfo failed: API is null.");return String(i)}},{key:"getDiagnosticInfo",value:function(e){var t=this.getApiHandle(),i="";if(t)switch(this.scormVersion){case"1.2":i=t.LMSGetDiagnostic(e);break;case"2004":i=t.GetDiagnostic(e)}else this.trace("ScormApiWrapper.getDiagnosticInfo failed: API is null.");return String(i)}},{key:"stringToBoolean",value:function(e){switch((0,o.default)(e)){case"object":case"string":return/(true|1)/i.test(e);case"number":return!!e;case"boolean":return e;case"undefined":default:return!1}}}]),e}();e.default=d}.apply(t,a))||(e.exports=n)},760:function(e,t,i){var a,n,s=i(11),o=i(212),r=i(153);a=[i(1976)],void 0===(n=function(e){"use strict";function t(e){if("function"!=typeof o)return null;var i=new o,a=new o;return(t=function(e){return e?a:i})(e)}e=function(e,i){if(!i&&e&&e.__esModule)return e;if(null===e||"object"!==s(e)&&"function"!=typeof e)return{default:e};var a=t(i);if(a&&a.has(e))return a.get(e);var n={},o=Object.defineProperty&&r;for(var c in e)if("default"!==c&&Object.prototype.hasOwnProperty.call(e,c)){var l=o?r(e,c):null;l&&(l.get||l.set)?Object.defineProperty(n,c,l):n[c]=e[c]}n.default=e,a&&a.set(e,n);return n}(e),window.epub360=window.epub360||{},window.epub360.api={EVENTS:[]},window.epub360.api.EVENTS.push({name:"ready",callback:e.start},{name:"beforeunload",callback:e.unload},{name:"page_changed",callback:e.pageChange})}.apply(t,a))||(e.exports=n)}}]);